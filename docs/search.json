[{"path":"https://macsands.github.io/dissmapr/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Sandra MacFadyen. Author, maintainer.","code":""},{"path":"https://macsands.github.io/dissmapr/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"MacFadyen S (2025). dissmapr: Workflow Compositional Dissimilarity Biodiversity Turnover Analysis. R package version 0.1.0, https://macsands.github.io/dissmapr/, https://github.com/macSands/dissmapr.","code":"@Manual{,   title = {dissmapr: Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis},   author = {Sandra MacFadyen},   year = {2025},   note = {R package version 0.1.0, https://macsands.github.io/dissmapr/},   url = {https://github.com/macSands/dissmapr}, }"},{"path":[]},{"path":"https://macsands.github.io/dissmapr/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://macsands.github.io/dissmapr/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others’ private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://macsands.github.io/dissmapr/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"https://macsands.github.io/dissmapr/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://macsands.github.io/dissmapr/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement sandra@biogis.co.za complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://macsands.github.io/dissmapr/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://macsands.github.io/dissmapr/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://macsands.github.io/dissmapr/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://macsands.github.io/dissmapr/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://macsands.github.io/dissmapr/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://macsands.github.io/dissmapr/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html. Community Impact Guidelines inspired [Mozilla’s code conduct enforcement ladder][https://github.com/mozilla/inclusion]. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https://www.contributor-covenant.org/translations.","code":""},{"path":"https://macsands.github.io/dissmapr/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to templateB3","title":"Contributing to templateB3","text":"outlines propose change templateB3. detailed discussion contributing tidyverse packages, please see development contributing guide code review principles.","code":""},{"path":"https://macsands.github.io/dissmapr/CONTRIBUTING.html","id":"fixing-typos","dir":"","previous_headings":"","what":"Fixing typos","title":"Contributing to templateB3","text":"can fix typos, spelling mistakes, grammatical errors documentation directly using GitHub web interface, long changes made source file. generally means ’ll need edit roxygen2 comments .R, .Rd file. can find .R file generates .Rd reading comment first line.","code":""},{"path":"https://macsands.github.io/dissmapr/CONTRIBUTING.html","id":"bigger-changes","dir":"","previous_headings":"","what":"Bigger changes","title":"Contributing to templateB3","text":"want make bigger change, ’s good idea first file issue make sure someone team agrees ’s needed. ’ve found bug, please file issue illustrates bug minimal reprex (also help write unit test, needed). See guide create great issue advice.","code":""},{"path":"https://macsands.github.io/dissmapr/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"Bigger changes","what":"Pull request process","title":"Contributing to templateB3","text":"Fork package clone onto computer. haven’t done , recommend using usethis::create_from_github(\"macSands/templateB3\", fork = TRUE). Install development dependencies devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesn’t pass cleanly, ’s good idea ask help continuing. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e. just first header). Follow style described https://style.tidyverse.org/news.html.","code":""},{"path":"https://macsands.github.io/dissmapr/CONTRIBUTING.html","id":"code-style","dir":"","previous_headings":"Bigger changes","what":"Code style","title":"Contributing to templateB3","text":"New code follow tidyverse style guide. can use styler package apply styles, please don’t restyle code nothing PR. use roxygen2, Markdown syntax, documentation. use testthat unit tests. Contributions test cases included easier accept.","code":""},{"path":"https://macsands.github.io/dissmapr/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contributing to templateB3","text":"Please note templateB3 project released Contributor Code Conduct. contributing project agree abide terms.","code":""},{"path":[]},{"path":[]},{"path":"https://macsands.github.io/dissmapr/index.html","id":"introduction","dir":"","previous_headings":"","what":"Introduction","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"dissmapr R package analysing compositional dissimilarity biodiversity turnover across spatial gradients. provides scalable, modular workflows integrate species occurrence, environmental data, multi-site compositional turnover metrics quantify predict biodiversity patterns. core feature use zeta diversity, extends beyond pairwise comparisons capture shared species across multiple sites - offering deeper insight community assembly, turnover, connectivity, rare common species. incorporating different regression methods within framework Multi-Site Generalised Dissimilarity Modelling (MS-GDM), dissmapr enables robust mapping, bioregional classification, scenario-based forecasting. Designed flexibility reproducibility, supports biodiversity monitoring conservation planning landscape regional scales.","code":""},{"path":"https://macsands.github.io/dissmapr/index.html","id":"step-by-step-workflow","dir":"","previous_headings":"","what":"Step-by-Step Workflow","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"dissmapr implements structured, reproducible workflow analysing biodiversity patterns delineating bioregions. function aligns specific step workflow, guiding users data acquisition predictive mapping. workflow begins sourcing species occurrence georeferenced environmental data, followed data formatting calculation compositional turnover using zeta diversity metrics (via zetadiv package). Multi-Site Generalized Dissimilarity Modelling (MS-GDM) applied model predict dissimilarity across landscapes. part Dissimilarity Cube Biodiversity Building Blocks Policy project, outputs predictions MS-GDM classified spatial clusters species composition, representing distinct bioregions. workflow also supports integration historical future climate data assess shifts biodiversity detect emerging, shifting, dissolving bioregions global change. step--step structure, mirrored accompanying tutorial sections, promotes accessibility, transparency, ecological insight multiple spatial temporal scales.","code":""},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_1-install-and-load-dissmapr","dir":"","previous_headings":"Step-by-Step Workflow","what":"1. Install and load dissmapr","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Install load dissmapr package GitHub, ensuring functions available use workflow.","code":"# install remotes if needed # install.packages(\"remotes\") remotes::install_github(\"macSands/dissmapr\") # Ensure the package is loaded when knitting library(dissmapr)  # Make sure all the functions are loaded devtools::load_all()"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_2-load-other-r-libraries","dir":"","previous_headings":"Step-by-Step Workflow","what":"2. Load other R libraries","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Load core libraries spatial processing, biodiversity modelling, visualization required across dissmapr analysis pipeline.","code":"# Load necessary libraries library(httr)       # HTTP client   library(geodata)    # Download geographic data   library(data.table) # Fast large-table operations   library(dplyr)      # Data manipulation verbs   library(tidyr)      # Tidy data reshaping   library(zoo)        # Time series utilities   library(sf)         # Vector spatial data   library(terra)      # Raster spatial operations   library(tidyterra)  # supplies geom_spatraster() library(zetadiv)    # Multi-site dissimilarity modelling library(ggplot2)    # Grammar of graphics   library(viridis)    # Perceptual color scales"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_3-get-species-occurrence-records-using-get_occurrence_data","dir":"","previous_headings":"Step-by-Step Workflow","what":"3. Get species occurrence records using get_occurrence_data()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"contextualise following steps workflow, use butterfly data South Africa, accessed GBIF, case demonstration. Ultimately, choice AoI taxa user-specific. section focuses automating retrieval pre-processing biodiversity occurrence data various sources, including: local databases.csv` files, URLs .zip files Global Biodiversity Information Facility (GBIF), species occurrence cubes B3 (specification) [work progress]. function assembles data species distributions across specified taxonomic groups regions, producing presence-absence abundance matrices quantify species co-occurrence within locations.","code":"bfly_data = get_occurrence_data(   data        = 'inst/extdata/gbif_butterflies.csv',   source_type = 'local_csv',   sep         = '\\t' )  # Check results dim(bfly_data) #> [1] 81825    52 str(bfly_data) #> 'data.frame':    81825 obs. of  52 variables: #>  $ gbifID                          : num  9.23e+08 9.23e+08 9.23e+08 9.22e+08 9.22e+08 ... #>  $ datasetKey                      : chr  \"6ac3f774-d9fb-4796-b3e9-92bf6c81c084\" \"6ac3f774-d9fb-4796-b3e9-92bf6c81c084\" \"6ac3f774-d9fb-4796-b3e9-92bf6c81c084\" \"6ac3f774-d9fb-4796-b3e9-92bf6c81c084\" ... #>  $ occurrenceID                    : chr  \"\" \"\" \"\" \"\" ... #>  $ kingdom                         : chr  \"Animalia\" \"Animalia\" \"Animalia\" \"Animalia\" ... #>  $ phylum                          : chr  \"Arthropoda\" \"Arthropoda\" \"Arthropoda\" \"Arthropoda\" ... #>  $ class                           : chr  \"Insecta\" \"Insecta\" \"Insecta\" \"Insecta\" ... #>  $ order                           : chr  \"Lepidoptera\" \"Lepidoptera\" \"Lepidoptera\" \"Lepidoptera\" ... #>  $ family                          : chr  \"Pieridae\" \"Pieridae\" \"Papilionidae\" \"Pieridae\" ... #>  $ genus                           : chr  \"Pieris\" \"Pieris\" \"Papilio\" \"Mylothris\" ... #>  $ sp_name                         : chr  \"Pieris brassicae\" \"Pieris brassicae\" \"Papilio demodocus\" \"Mylothris agathina\" ... #>  $ infraspecificEpithet            : chr  \"\" \"\" \"\" \"agathina\" ... #>  $ taxonRank                       : chr  \"SPECIES\" \"SPECIES\" \"SPECIES\" \"SUBSPECIES\" ... #>  $ scientificName                  : chr  \"Pieris brassicae (Linnaeus, 1758)\" \"Pieris brassicae (Linnaeus, 1758)\" \"Papilio demodocus Esper, 1798\" \"Mylothris agathina agathina\" ... #>  $ verbatimScientificName          : chr  \"Pieris brassicae\" \"Pieris brassicae\" \"Papilio demodocus subsp. demodocus\" \"Mylothris agathina subsp. agathina\" ... #>  $ verbatimScientificNameAuthorship: logi  NA NA NA NA NA NA ... #>  $ countryCode                     : chr  \"ZA\" \"ZA\" \"ZA\" \"ZA\" ... #>  $ locality                        : chr  \"Hermanus\" \"Polkadraai Road\" \"Signal Hill\" \"Hermanus\" ... #>  $ stateProvince                   : chr  \"\" \"\" \"\" \"\" ... #>  $ occurrenceStatus                : chr  \"PRESENT\" \"PRESENT\" \"PRESENT\" \"PRESENT\" ... #>  $ individualCount                 : int  NA NA NA NA NA NA NA NA NA NA ... #>  $ publishingOrgKey                : chr  \"bb646dff-a905-4403-a49b-6d378c2cf0d9\" \"bb646dff-a905-4403-a49b-6d378c2cf0d9\" \"bb646dff-a905-4403-a49b-6d378c2cf0d9\" \"bb646dff-a905-4403-a49b-6d378c2cf0d9\" ... #>  $ y                               : num  -34.4 -34 -33.9 -34.4 -34.4 ... #>  $ x                               : num  19.2 18.8 18.4 19.2 18.5 ... #>  $ coordinateUncertaintyInMeters   : num  250 250 250 250 250 250 250 250 250 250 ... #>  $ coordinatePrecision             : logi  NA NA NA NA NA NA ... #>  $ elevation                       : logi  NA NA NA NA NA NA ... #>  $ elevationAccuracy               : logi  NA NA NA NA NA NA ... #>  $ depth                           : logi  NA NA NA NA NA NA ... #>  $ depthAccuracy                   : logi  NA NA NA NA NA NA ... #>  $ eventDate                       : chr  \"2012-10-13T00:00\" \"2012-11-01T00:00\" \"2012-10-31T00:00\" \"2012-10-13T00:00\" ... #>  $ day                             : int  13 1 31 13 30 23 20 22 21 22 ... #>  $ month                           : int  10 11 10 10 10 10 10 10 10 10 ... #>  $ year                            : int  2012 2012 2012 2012 2012 2012 2012 2012 2012 2012 ... #>  $ taxonKey                        : int  1920506 1920506 1938125 11374894 6113873 6118817 6118817 6118871 1919924 1770649 ... #>  $ speciesKey                      : int  1920506 1920506 1938125 5137998 6113873 1954382 1954382 1964076 1919924 1770649 ... #>  $ basisOfRecord                   : chr  \"HUMAN_OBSERVATION\" \"HUMAN_OBSERVATION\" \"HUMAN_OBSERVATION\" \"HUMAN_OBSERVATION\" ... #>  $ institutionCode                 : chr  \"naturgucker\" \"naturgucker\" \"naturgucker\" \"naturgucker\" ... #>  $ collectionCode                  : chr  \"naturgucker\" \"naturgucker\" \"naturgucker\" \"naturgucker\" ... #>  $ catalogNumber                   : chr  \"-190723441\" \"2051102952\" \"1565945073\" \"-1879976251\" ... #>  $ recordNumber                    : chr  \"\" \"\" \"\" \"\" ... #>  $ identifiedBy                    : chr  \"\" \"\" \"\" \"\" ... #>  $ dateIdentified                  : chr  \"\" \"\" \"\" \"\" ... #>  $ license                         : chr  \"CC_BY_4_0\" \"CC_BY_4_0\" \"CC_BY_4_0\" \"CC_BY_4_0\" ... #>  $ rightsHolder                    : chr  \"\" \"\" \"\" \"\" ... #>  $ recordedBy                      : chr  \"591374253\" \"591374253\" \"591374253\" \"591374253\" ... #>  $ typeStatus                      : logi  NA NA NA NA NA NA ... #>  $ establishmentMeans              : logi  NA NA NA NA NA NA ... #>  $ lastInterpreted                 : chr  \"2024-03-15T23:20:20.346Z\" \"2024-03-15T23:22:38.206Z\" \"2024-03-15T23:26:59.721Z\" \"2024-03-15T23:23:55.839Z\" ... #>  $ mediaType                       : chr  \"\" \"\" \"\" \"StillImage\" ... #>  $ issue                           : chr  \"COORDINATE_ROUNDED;GEODETIC_DATUM_ASSUMED_WGS84;CONTINENT_DERIVED_FROM_COORDINATES;MULTIMEDIA_URI_INVALID\" \"COORDINATE_ROUNDED;GEODETIC_DATUM_ASSUMED_WGS84;CONTINENT_DERIVED_FROM_COORDINATES;MULTIMEDIA_URI_INVALID\" \"COORDINATE_ROUNDED;GEODETIC_DATUM_ASSUMED_WGS84;CONTINENT_DERIVED_FROM_COORDINATES;TAXON_MATCH_HIGHERRANK;MULTI\"| __truncated__ \"COORDINATE_ROUNDED;GEODETIC_DATUM_ASSUMED_WGS84;CONTINENT_DERIVED_FROM_COORDINATES\" ... #>  $ site_id                         : int  1 2 3 1 4 5 5 5 5 5 ... #>  $ pa                              : num  1 1 1 1 1 1 1 1 1 1 ... head(bfly_data[,1:6]) #>      gbifID                           datasetKey occurrenceID  kingdom     phylum   class #> 1 923051749 6ac3f774-d9fb-4796-b3e9-92bf6c81c084              Animalia Arthropoda Insecta #> 2 922985630 6ac3f774-d9fb-4796-b3e9-92bf6c81c084              Animalia Arthropoda Insecta #> 3 922619348 6ac3f774-d9fb-4796-b3e9-92bf6c81c084              Animalia Arthropoda Insecta #> 4 922426210 6ac3f774-d9fb-4796-b3e9-92bf6c81c084              Animalia Arthropoda Insecta #> 5 921650584 6ac3f774-d9fb-4796-b3e9-92bf6c81c084              Animalia Arthropoda Insecta #> 6 921485695 6ac3f774-d9fb-4796-b3e9-92bf6c81c084              Animalia Arthropoda Insecta"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_4-format-data-using-format_df","dir":"","previous_headings":"Step-by-Step Workflow","what":"4. Format data using format_df()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Use format_df standardise reshape raw biodiversity tables long wide format required later dissmapr steps. Importantly, function alter spatial resolution original observations - simply tidies data automatically identifying key columns (e.g., coordinates, species, values), assigning missing observation/site IDs, reformatting data analysis. Outputs include cleaned site_obs dataset site_spp matrix processing: • site_obs: Simplified table unique site_id, x, y, species value records (long format). • site_spp: Site--species matrix biodiversity assessments (wide format).","code":""},{"path":"https://macsands.github.io/dissmapr/index.html","id":"format-data-into-long-site_obs-and-wide-site_spp-formats","dir":"","previous_headings":"Step-by-Step Workflow > 4. Format data using format_df()","what":"Format data into long (site_obs) and wide (site_spp) formats","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"","code":"bfly_result = format_df(   data        = bfly_data, # A `data.frame` of biodiversity records   species_col = 'verbatimScientificName', # Name of species column (required for `\"long\"`)   value_col   = 'pa', # Name of value column (e.g. presence/abundance; for `\"long\"`)   extra_cols  = NULL, # Character vector of other columns to keep   format      = 'long' # Either`\"long\"` or `\"wide\"`. If `NULL`, inferred from `species_col` & `value_col` )  # Check `bfly_result` structure str(bfly_result, max.level = 1) #> List of 2 #>  $ site_obs:'data.frame':    79953 obs. of  5 variables: #>  $ site_spp: tibble [56,090 × 2,871] (S3: tbl_df/tbl/data.frame)  # Optional: Create new objects from list items site_obs = bfly_result$site_obs site_spp = bfly_result$site_spp  # Check results dim(site_obs) #> [1] 79953     5 head(site_obs) #>   site_id        x         y                            species value #> 1       1 19.24410 -34.42086                   Pieris brassicae     1 #> 2       2 18.75564 -33.96044                   Pieris brassicae     1 #> 3       3 18.40321 -33.91651 Papilio demodocus subsp. demodocus     1 #> 4       1 19.24410 -34.42086 Mylothris agathina subsp. agathina     1 #> 5       4 18.47488 -34.35024                  Eutricha capensis     1 #> 6       5 25.65097 -33.58570            Drepanogynis bifasciata     1  dim(site_spp) #> [1] 56090  2871 head(site_spp[,1:6]) #> # A tibble: 6 × 6 #>   site_id     x     y `Mylothris agathina subsp. agathina` `Pieris brassicae` `Tarucus thespis` #>     <int> <dbl> <dbl>                                <dbl>              <dbl>             <dbl> #> 1       1  19.2 -34.4                                    1                  1                 1 #> 2       2  18.8 -34.0                                    0                  1                 0 #> 3       3  18.4 -33.9                                    0                  0                 0 #> 4       4  18.5 -34.4                                    0                  0                 0 #> 5       5  25.7 -33.6                                    0                  0                 0 #> 6       6  22.2 -33.6                                    0                  0                 0  #### Get parameters from processed data to use later # Number of species (n_sp = dim(site_spp)[2] - 3) #> [1] 2868  # Species names sp_cols = names(site_spp)[-c(1:3)] sp_cols[1:10] #>  [1] \"Mylothris agathina subsp. agathina\" \"Pieris brassicae\"                   #>  [3] \"Tarucus thespis\"                    \"Acraea horta\"                       #>  [5] \"Danaus chrysippus\"                  \"Papilio demodocus subsp. demodocus\" #>  [7] \"Eutricha capensis\"                  \"Mesocelis monticola\"                #>  [9] \"Vanessa cardui\"                     \"Cuneisigna obstans\""},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_5-user-defined-area-of-interest-and-grid-resolution","dir":"","previous_headings":"Step-by-Step Workflow","what":"5. User-defined area of interest and grid resolution","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Load spatial boundary data South Africa serve geographic reference subsequent biodiversity analyses visualizations.","code":"# Read RSA shape file rsa = sf::st_read('inst/extdata/rsa.shp') #> Reading layer `rsa' from data source `D:\\Methods\\R\\myR_Packages\\myCompletePks\\dissmapr\\inst\\extdata\\rsa.shp' using driver `ESRI Shapefile' #> Simple feature collection with 1 feature and 1 field #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 16.45802 ymin: -34.83514 xmax: 32.89125 ymax: -22.12661 #> Geodetic CRS:  WGS 84  # Define your resolution and create mask to use later res = 0.5 # 0.5 degrees is roughly 55km  # Convert to a terra vector rsa_vect = vect(rsa)  # Create an empty raster over RSA at your desired resolution grid = rast(rsa_vect, resolution = res, crs = crs(rsa_vect)) values(grid) = 1   # fill with dummy values  # Mask everything outside the RSA boundary grid_masked = mask(grid, rsa_vect)"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_6-summarise-records-by-grid-centroid-using-generate_grid","dir":"","previous_headings":"Step-by-Step Workflow","what":"6. Summarise records by grid centroid using generate_grid()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Use generate_grid overlay user-defined lattice study region—whose bounds inferred occurrence data—without modifying underlying observations . function constructs raster‐based grid chosen cell size, assigns point unique grid_id, compiles summary user-specified attributes every cell. returns three coordinated outputs: • grid: SpatRaster grid index • grid_sf: sf data.frame .e. lattice polygon features mapping spatial joins • block_sp: data.frame records per-cell totals, centroids, statistics. aggregating raw records consistent spatial units, generate_grid provides structured foundation needed subsequent landscape-scale biodiversity analyses.","code":""},{"path":"https://macsands.github.io/dissmapr/index.html","id":"assign-records-to-a-grid-at-a-set-resolution","dir":"","previous_headings":"Step-by-Step Workflow > 6. Summarise records by grid centroid using generate_grid()","what":"Assign records to a grid at a set resolution","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Aggregate species records grid cells user-specified size (e.g. 0.5°) enable spatially standardized biodiversity analyses.","code":"grid_list = generate_grid(   data       = site_spp,   x_col      = \"x\",   y_col      = \"y\",   grid_size  = 0.5,   sum_col_range = 4:ncol(site_spp),   crs_epsg   = 4326 )  # Check `grid_list` structure str(grid_list, max.level = 1) #> List of 3 #>  $ grid    :S4 class 'SpatRaster' [package \"terra\"] #>  $ grid_sf :Classes 'sf' and 'data.frame':   1110 obs. of  8 variables: #>   ..- attr(*, \"sf_column\")= chr \"geometry\" #>   ..- attr(*, \"agr\")= Factor w/ 3 levels \"constant\",\"aggregate\",..: NA NA NA NA NA NA NA #>   .. ..- attr(*, \"names\")= chr [1:7] \"centroid_lon\" \"centroid_lat\" \"grid_id\" \"mapsheet\" ... #>  $ block_sp:'data.frame':    415 obs. of  2874 variables:  # Optional: Create new objects from list items aoi_grid = grid_list$grid_sf grid_spp = grid_list$block_sp  # Check results dim(aoi_grid) #> [1] 1110    8 head(aoi_grid) #> Simple feature collection with 6 features and 6 fields #> Active geometry column: geometry #> Geometry type: POLYGON #> Dimension:     XY #> Bounding box:  xmin: 15.5 ymin: -36 xmax: 18.5 ymax: -35.5 #> Geodetic CRS:  WGS 84 #>   centroid_lon centroid_lat grid_id  mapsheet obs_sum spp_rich                       geometry #> 1        15.75       -35.75       1 E015S36BB      NA       NA POLYGON ((15.5 -36, 16 -36,... #> 2        16.25       -35.75       2 E016S36BB      NA       NA POLYGON ((16 -36, 16.5 -36,... #> 3        16.75       -35.75       3 E016S36BB      NA       NA POLYGON ((16.5 -36, 17 -36,... #> 4        17.25       -35.75       4 E017S36BB      NA       NA POLYGON ((17 -36, 17.5 -36,... #> 5        17.75       -35.75       5 E017S36BB      NA       NA POLYGON ((17.5 -36, 18 -36,... #> 6        18.25       -35.75       6 E018S36BB      NA       NA POLYGON ((18 -36, 18.5 -36,... #>               centroid #> 1 POINT (15.75 -35.75) #> 2 POINT (16.25 -35.75) #> 3 POINT (16.75 -35.75) #> 4 POINT (17.25 -35.75) #> 5 POINT (17.75 -35.75) #> 6 POINT (18.25 -35.75)  dim(grid_spp) #> [1]  415 2874 head(grid_spp[,1:6]) #>   grid_id centroid_lon centroid_lat  mapsheet obs_sum spp_rich #> 1    1026        28.75    -22.25004 E028S23BB       3        2 #> 2    1027        29.25    -22.25004 E029S23BB      41       31 #> 3    1028        29.75    -22.25004 E029S23BB      10       10 #> 4    1029        30.25    -22.25004 E030S23BB       7        7 #> 5    1030        30.75    -22.25004 E030S23BB       6        6 #> 6    1031        31.25    -22.25004 E031S23BB     107       76"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"generate-a-data-frame-xy-of-site-centroids","dir":"","previous_headings":"Step-by-Step Workflow > 6. Summarise records by grid centroid using generate_grid()","what":"Generate a data frame ‘xy’ of site centroids","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Extract longitude–latitude coordinates summary metrics occupied grid cell.","code":"# Grid centroids with 'gird_id', 'centroid_lon', 'centroid_lat', 'obs_sum' and `spp_rich` grid_xy = grid_spp[,c(1:3,5:6)]  # Create species observations data.frame spp_obs = site_obs  # Check results dim(grid_xy) #> [1] 415   5 head(grid_xy) #>   grid_id centroid_lon centroid_lat obs_sum spp_rich #> 1    1026        28.75    -22.25004       3        2 #> 2    1027        29.25    -22.25004      41       31 #> 3    1028        29.75    -22.25004      10       10 #> 4    1029        30.25    -22.25004       7        7 #> 5    1030        30.75    -22.25004       6        6 #> 6    1031        31.25    -22.25004     107       76  dim(spp_obs) #> [1] 79953     5 head(spp_obs) #>   site_id        x         y                            species value #> 1       1 19.24410 -34.42086                   Pieris brassicae     1 #> 2       2 18.75564 -33.96044                   Pieris brassicae     1 #> 3       3 18.40321 -33.91651 Papilio demodocus subsp. demodocus     1 #> 4       1 19.24410 -34.42086 Mylothris agathina subsp. agathina     1 #> 5       4 18.47488 -34.35024                  Eutricha capensis     1 #> 6       5 25.65097 -33.58570            Drepanogynis bifasciata     1"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"generate-a-map-of-rsa-with-occupied-grid-cells-as-centroid-points","dir":"","previous_headings":"Step-by-Step Workflow > 6. Summarise records by grid centroid using generate_grid()","what":"Generate a map of RSA with occupied grid cells as centroid points","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Visualize observation density across South Africa using centroid-based mapping gridded biodiversity data.","code":"ggplot() +   geom_sf(data = aoi_grid, fill = NA, color = \"darkgrey\", alpha = 0.5) +   geom_point(data = grid_spp,              aes(x = centroid_lon, y = centroid_lat,                  size = sqrt(obs_sum),                  color = sqrt(obs_sum))) +   scale_color_viridis_c(option = \"turbo\") +   geom_sf(data = rsa, fill = NA, color = \"black\") +   theme_minimal() +   labs(title = \"0.5° Grid with Observation Counts\",        x = \"Longitude\", y = \"Latitude\")"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"example-1---species-richness-using-richness","dir":"","previous_headings":"Step-by-Step Workflow","what":"Example 1 - Species Richness using richness()`","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"calculate species richness across sites block_sp dataset, using compute_orderwise() function. richness() metric function applied grid_id column site identification, species data specified sp_cols. Orders 1 4 computed .e. order=1, computes basic species richness individual sites, higher orders (2 4) represent differences richness pairwise /multi-site combinations. subset 1000 samples used higher-order computations speed-computation time. Parallel processing enabled 4 worker threads improve performance. output table summarizing species richness across specified orders.","code":"# Compute species richness (order 1) and the difference thereof for orders 2 to 4 rich_o1234 = compute_orderwise(   df = grid_spp,   func = richness,   site_col = 'grid_id',   sp_cols = sp_cols,   sample_no = 1000,   order = 1:4,   parallel = TRUE,   n_workers = 4) #> Time elapsed for order 1: 0 minutes and 9.34 seconds #> Time elapsed for order 2: 0 minutes and 16.40 seconds #> Time elapsed for order 3: 0 minutes and 49.92 seconds #> Time elapsed for order 4: 1 minutes and 39.81 seconds #> Total computation time: 1 minutes and 39.82 seconds  # Check results head(rich_o1234) #>    site_from site_to order value #>       <char>  <char> <int> <int> #> 1:      1026    <NA>     1     2 #> 2:      1027    <NA>     1    31 #> 3:      1028    <NA>     1    10 #> 4:      1029    <NA>     1     7 #> 5:      1030    <NA>     1     6 #> 6:      1031    <NA>     1    76 # Plot species richness distribution by order boxplot(value ~ order,         data = rich_o1234,         col = c('#4575b4', '#99ce8f', '#fefab8', '#d73027'),         horizontal = TRUE,         outline = FALSE,         main = 'Distribution of Species Richness by Order') # Link centroid coordinates back to `rich_o1234` data.frame for plotting rich_o1234$centroid_lon = grid_spp$centroid_lon[match(rich_o1234$site_from, grid_spp$grid_id)] rich_o1234$centroid_lat = grid_spp$centroid_lat[match(rich_o1234$site_from, grid_spp$grid_id)]  # Summarise turnover by site (spatial location) mean_rich_o1234 = rich_o1234 %>%   group_by(order, site_from, centroid_lon, centroid_lat) %>%   summarize(value = mean(value, na.rm = TRUE))  # Check results head(mean_rich_o1234) #> # A tibble: 6 × 5 #> # Groups:   order, site_from, centroid_lon [6] #>   order site_from centroid_lon centroid_lat value #>   <int> <chr>            <dbl>        <dbl> <dbl> #> 1     1 1026              28.8        -22.3     2 #> 2     1 1027              29.2        -22.3    31 #> 3     1 1028              29.7        -22.3    10 #> 4     1 1029              30.3        -22.3     7 #> 5     1 1030              30.8        -22.3     6 #> 6     1 1031              31.3        -22.3    76"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"example-2---community-turnover-using-turnover","dir":"","previous_headings":"Step-by-Step Workflow","what":"Example 2 - Community Turnover using turnover()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"calculate species turnover (beta diversity) across sites block_sp dataset using compute_orderwise() function . turnover() metric function applied grid_id column site identification, species data specified sp_cols. Order = 1 option turnover requires comparison sites. orders 2 5, computes turnover pairwise higher-order site combinations, representing proportion species shared sites. subset 1000 samples used higher-order comparisons. Parallel processing 4 worker threads improves efficiency, output table summarizing species turnover across specified orders. visualize spatial patterns turnover across sites, geographic coordinates added back results. allows spatial exploration turnover patterns across different orders, highlighting regions high low turnover enabling comparisons across orders. visualizations provide valuable insights spatial biodiversity dynamics. assign geographic coordinates (x y) block_sp dataset turn_o2345 results. Using match, aligns coordinates site_from column turn_o2345 based corresponding grid_id values block_sp. prepares dataset spatial plotting.  Plot order-wise turnover (orders 2:5) calculated using compute_orderwise(..., func = turnover, ...) visualise spatial patterns turnover across different orders. Results highlight regions high low turnover facilitate comparison across orders, providing insights spatial biodiversity dynamics.","code":"# Compute community turnover for orders 2 to 5 turn_o2345 = compute_orderwise(   df = grid_spp,   func = turnover,   site_col = 'grid_id',   sp_cols = sp_cols, # OR `names(grid_spp)[-c(1:4)]`   sample_no = 1000, # Reduce to speed-up computation   order = 2:5,   parallel = TRUE,   n_workers = 4) #> Time elapsed for order 2: 0 minutes and 12.19 seconds #> Time elapsed for order 3: 1 minutes and 21.78 seconds #> Time elapsed for order 4: 2 minutes and 51.04 seconds #> Time elapsed for order 5: 4 minutes and 57.81 seconds #> Total computation time: 4 minutes and 57.83 seconds  # Check results head(turn_o2345) #>    site_from site_to order     value #>       <char>  <char> <int>     <num> #> 1:      1027    1026     2 0.9354839 #> 2:      1028    1026     2 0.9090909 #> 3:      1029    1026     2 1.0000000 #> 4:      1030    1026     2 1.0000000 #> 5:      1031    1026     2 0.9870130 #> 6:       117    1026     2 1.0000000 # Add coordinates back to 'turn_o2345' for plotting turn_o2345$centroid_lon = grid_spp$centroid_lon[match(turn_o2345$site_from, grid_spp$grid_id)] turn_o2345$centroid_lat = grid_spp$centroid_lat[match(turn_o2345$site_from, grid_spp$grid_id)]  # Summarise turnover by site (spatial location) mean_turn_o2345 = turn_o2345 %>%   group_by(order, site_from, centroid_lon, centroid_lat) %>%   summarize(value = mean(value, na.rm = TRUE))  # Plot Beta Diversity (pairwise turnover i.e. only order 2) calculated using `compute_orderwise(..., func = turnover, ...)` ggplot() +   geom_tile(data = mean_turn_o2345[mean_turn_o2345$order==2,],             aes(x = centroid_lon, y = centroid_lat, fill = value)) +   scale_fill_gradientn(colors = viridis(8)) + #Apply viridis color palette   geom_sf(data = rsa, fill = NA, color = \"black\", alpha = 0.5) +   theme_minimal() +   labs(x = \"Longitude\", y = \"Latitude\", fill = \"Beta Diversity\") +   theme(panel.grid = element_blank(),panel.border = element_blank()   ) # Plot order-wise turnover (orders 2:5) calculated using `compute_orderwise(..., func = turnover, ...)` ggplot() +   geom_tile(data = mean_turn_o2345, aes(x = centroid_lon, y = centroid_lat, fill = value)) +   scale_fill_viridis_c(option = \"turbo\", name = \"Turnover\") +   geom_sf(data = rsa, fill = NA, color = \"black\", alpha = 0.5) +   theme_minimal() +   labs(     title = \"Mean Turnover by Order\",     x = \"Longitude\",     y = \"Latitude\"   ) +   facet_wrap(~ order, ncol = 2)"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_7-generate-site-by-species-matrix---site_spp","dir":"","previous_headings":"Step-by-Step Workflow","what":"7. Generate site by species matrix - site_spp","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Create matrix species counts per site use biodiversity dissimilarity analyses.","code":"xy = grid_spp[,2:3] site_spp = grid_spp[,c(1:3,5:ncol(grid_spp))]  # Check results dim(xy) #> [1] 415   2 head(xy) #>   centroid_lon centroid_lat #> 1        28.75    -22.25004 #> 2        29.25    -22.25004 #> 3        29.75    -22.25004 #> 4        30.25    -22.25004 #> 5        30.75    -22.25004 #> 6        31.25    -22.25004  dim(site_spp) #> [1]  415 2873 head(site_spp[,1:6]) #>   grid_id centroid_lon centroid_lat obs_sum spp_rich Mylothris agathina subsp. agathina #> 1    1026        28.75    -22.25004       3        2                                  0 #> 2    1027        29.25    -22.25004      41       31                                  0 #> 3    1028        29.75    -22.25004      10       10                                  0 #> 4    1029        30.25    -22.25004       7        7                                  0 #> 5    1030        30.75    -22.25004       6        6                                  0 #> 6    1031        31.25    -22.25004     107       76                                  0"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"fetch-record-of-occurrence-counts-calculated-using-generate_grid","dir":"","previous_headings":"Step-by-Step Workflow > 7. Generate site by species matrix - site_spp","what":"Fetch record of occurrence counts calculated using generate_grid()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"generate_grid summarised number species observations per grid cell assess sampling effort.","code":"# Sampling effort = observation counts sam_eff = grid_spp[, c(\"grid_id\",\"centroid_lon\",\"centroid_lat\",\"obs_sum\")] obs_cnt = grid_spp[,c(1:3,5)]  # Check results dim(obs_cnt) #> [1] 415   4 head(obs_cnt) #>   grid_id centroid_lon centroid_lat obs_sum #> 1    1026        28.75    -22.25004       3 #> 2    1027        29.25    -22.25004      41 #> 3    1028        29.75    -22.25004      10 #> 4    1029        30.25    -22.25004       7 #> 5    1030        30.75    -22.25004       6 #> 6    1031        31.25    -22.25004     107"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"generate-a-binary-presenceabsence-data-frame-sbs","dir":"","previous_headings":"Step-by-Step Workflow > 7. Generate site by species matrix - site_spp","what":"Generate a binary (presence/absence) data frame ‘sbs’","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Convert species abundance data presence/absence format (site_spp_pa) binary dissimilarity analyses.","code":"# Create site-by-species matrix sbs = site_spp %>%   mutate(across(all_of(sp_cols), ~ ifelse(. > 0, 1, 0)))  # Check results dim(sbs) #> [1]  415 2873 head(sbs[,1:6]) #>   grid_id centroid_lon centroid_lat obs_sum spp_rich Mylothris agathina subsp. agathina #> 1    1026        28.75    -22.25004       3        2                                  0 #> 2    1027        29.25    -22.25004      41       31                                  0 #> 3    1028        29.75    -22.25004      10       10                                  0 #> 4    1029        30.25    -22.25004       7        7                                  0 #> 5    1030        30.75    -22.25004       6        6                                  0 #> 6    1031        31.25    -22.25004     107       76                                  0  # Assuming 'sp_cols' is a vector of column names site_spp_pa = site_spp %>%   mutate(across(all_of(sp_cols), ~ ifelse(!is.na(.) & . > 0, 1, 0)))  # Check results dim(site_spp_pa) #> [1]  415 2873 head(site_spp_pa[,1:6]) #>   grid_id centroid_lon centroid_lat obs_sum spp_rich Mylothris agathina subsp. agathina #> 1    1026        28.75    -22.25004       3        2                                  0 #> 2    1027        29.25    -22.25004      41       31                                  0 #> 3    1028        29.75    -22.25004      10       10                                  0 #> 4    1029        30.25    -22.25004       7        7                                  0 #> 5    1030        30.75    -22.25004       6        6                                  0 #> 6    1031        31.25    -22.25004     107       76                                  0"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"fetch-species-richness-values-calculated-using-generate_grid","dir":"","previous_headings":"Step-by-Step Workflow > 7. Generate site by species matrix - site_spp","what":"Fetch species richness values calculated using generate_grid()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"generate_grid calculated species richness per site based binary presence/absence records.","code":"# Species richness spp_rich = grid_spp[, c(\"grid_id\",\"centroid_lon\",\"centroid_lat\",\"spp_rich\")]  # Check results dim(site_spp_pa) #> [1]  415 2873 head(site_spp_pa[,1:6]) #>   grid_id centroid_lon centroid_lat obs_sum spp_rich Mylothris agathina subsp. agathina #> 1    1026        28.75    -22.25004       3        2                                  0 #> 2    1027        29.25    -22.25004      41       31                                  0 #> 3    1028        29.75    -22.25004      10       10                                  0 #> 4    1029        30.25    -22.25004       7        7                                  0 #> 5    1030        30.75    -22.25004       6        6                                  0 #> 6    1031        31.25    -22.25004     107       76                                  0"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"generate-obs_cnt-and-spp_rich-raster-maps","dir":"","previous_headings":"Step-by-Step Workflow > 7. Generate site by species matrix - site_spp","what":"Generate ‘obs_cnt’ and ‘spp_rich’ raster maps","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"generate_grid also creates SpatRast help visualise sampling effort species richness study area.  Note: occurrence coordinates used assigning grids; needed beyond step.","code":"# Species richness and sampling effort SpatRast ras_effRich = grid_list$grid[[2:3]]  # Plot `ras_effRich` using colour palettes from `viridis` # plot(sqrt(ras_effRich), col = turbo(100)) plot(   sqrt(ras_effRich),   col   = turbo(100),   colNA = NA,            # <-- NA cells completely transparent   axes  = FALSE ) # plot(vect(rsa), add = TRUE, border = \"black\")"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_8-generate-site-by-environment-matrix-using-get_enviro_data","dir":"","previous_headings":"Step-by-Step Workflow","what":"8. Generate site by environment matrix using get_enviro_data()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Use get_enviro_data extract environmental variables spatial points either species observations grid centroids. Data can sourced online repositories (e.g. WorldClim, SoilGrids via geodata) local rasters. function defines area interest buffer, extracts selected variables, interpolates missing values using nearby non-NA points. Outputs include cropped rasters, spatial points (sf object), combined site--environment data frame (site_env) downstream ecological analyses. Future support extend CHELSA (climenv), Google Earth Engine (rgee), mapme.biodiversity expanded environmental biodiversity data access.","code":"# Use `get_enviro_data` to fetch environmental data for your grid centroids enviro_list = get_enviro_data(   data      = sbs,   buffer_km = 10,   source    = 'geodata',   var       = \"bio\",   res       = 5,   path      = 'download_data',   sp_cols   = 6:ncol(sbs),   ext_cols  = c('obs_sum','spp_rich') )  # Optional: Create new objects from list items ras_enviro = enviro_list$env_rast  # Optional: Rename the columns to something more descriptive names_env = c(\"temp_mean\", \"mdr\", \"iso\", \"temp_sea\", \"temp_max\",                     \"temp_min\", \"temp_rang\",\"temp_wetQ\",\"temp_dryQ\", \"temp_warmQ\",                     \"temp_coldQ\", \"rain_mean\",\"rain_wet\", \"rain_dry\", \"rain_sea\",                     \"rain_wetQ\", \"rain_dryQ\",\"rain_warmQ\", \"rain_coldQ\") names(enviro_list$env_rast) = names_env names(ras_enviro) = names_env"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"add-eff-rich-raster-to-the-enviro-stack-raster","dir":"","previous_headings":"Step-by-Step Workflow > 8. Generate site by environment matrix using get_enviro_data()","what":"Add ‘eff-rich’ raster to the enviro stack raster","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Combine environmental rasters sampling effort species richness layers joint spatial analysis.","code":"# Combine `SpatRast` ras_enviro_effRich = c(sqrt(ras_effRich), resample(ras_enviro, ras_effRich))  # Plot the first 4 layers of `ras_enviro_effRich` plot(ras_enviro_effRich[[1:4]], col = turbo(100))"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"create-dataframe-of-environmental-variables-with-site-centroids-xy","dir":"","previous_headings":"Step-by-Step Workflow > 8. Generate site by environment matrix using get_enviro_data()","what":"Create data.frame of environmental variables with site centroids ‘xy’","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Environmental data linked grid centroids using get_enviro_data, now visualise spatial variation selected climate variables check results.","code":"# Create `env_df` env_df = enviro_list$env_df[,c(1:5,8:26)]  # Make sure column names are correct names(env_df) = c(\"grid_id\",\"centroid_lon\",\"centroid_lat\",\"obs_sum\",\"spp_rich\",\"temp_mean\",                   \"mdr\", \"iso\", \"temp_sea\", \"temp_max\",                     \"temp_min\", \"temp_rang\",\"temp_wetQ\",\"temp_dryQ\", \"temp_warmQ\",                     \"temp_coldQ\", \"rain_mean\",\"rain_wet\", \"rain_dry\", \"rain_sea\",                     \"rain_wetQ\", \"rain_dryQ\",\"rain_warmQ\", \"rain_coldQ\") # Check results dim(env_df) #> [1] 415  24 head(env_df[,1:6]) #>   grid_id centroid_lon centroid_lat obs_sum spp_rich temp_mean #> 1    1026        28.75    -22.25004       3        2  21.88425 #> 2    1027        29.25    -22.25004      41       31  21.76921 #> 3    1028        29.75    -22.25004      10       10  21.53492 #> 4    1029        30.25    -22.25004       7        7  23.01796 #> 5    1030        30.75    -22.25004       6        6  23.59879 #> 6    1031        31.25    -22.25004     107       76  24.57367  # Plot the results to check the conversion is accurate ggplot() +   # Add 0.25deg grid layer   geom_sf(data = aoi_grid, fill = NA, color = \"darkgrey\", alpha = 0.5) +   # Add bfly points layer   geom_point(data = env_df,               aes(x = centroid_lon,                  y = centroid_lat,                  size = sqrt(temp_mean),                  color = temp_mean)) +   scale_color_viridis_c(option = \"turbo\") +  # Use turbo color scale   # Add boundary layer   geom_sf(data = rsa, fill = NA, color = \"black\", alpha = 1) +   theme_minimal() +   labs(     title = \"0.5° Grid Cells with temp_mean\",     x = \"Longitude\",     y = \"Latitude\")"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"generate-site-by-environment-data-frame-sbe","dir":"","previous_headings":"Step-by-Step Workflow > 8. Generate site by environment matrix using get_enviro_data()","what":"Generate Site-by-Environment data frame ‘sbe’","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Create unified data frame site coordinates, sampling effort, richness, environmental variables modelling called sbe.","code":"# Create `sbe` data.frame sbe = env_df %>%   select(grid_id, centroid_lon, centroid_lat, obs_sum, spp_rich, everything())"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_9-change-coordinates-projection-using-sfst_transform","dir":"","previous_headings":"Step-by-Step Workflow","what":"9. Change coordinates projection using sf::st_transform()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Reproject spatial coordinates geographic (WGS84) projected system (e.g. Albers Equal Area) analyses requiring distance meters, spatial clustering environmental modelling.","code":"# Convert to sf object with WGS84 geographic CRS xy_sf = st_as_sf(xy, coords = c(\"centroid_lon\", \"centroid_lat\"), crs = 4326)  # Project to Albers Equal Area (meters) xy_utm = st_transform(xy_sf, crs = 9822)  # Extract transformed coordinates in meters # Combine transformed coordinates back into data frame xy_utm_df = cbind(xy, st_coordinates(xy_utm))  # Check results and compare coordinate formats head(xy) #>   centroid_lon centroid_lat #> 1        28.75    -22.25004 #> 2        29.25    -22.25004 #> 3        29.75    -22.25004 #> 4        30.25    -22.25004 #> 5        30.75    -22.25004 #> 6        31.25    -22.25004 head(xy_utm_df) #>   centroid_lon centroid_lat       X        Y #> 1        28.75    -22.25004 6392274 -6836200 #> 2        29.25    -22.25004 6480542 -6808542 #> 3        29.75    -22.25004 6568648 -6780369 #> 4        30.25    -22.25004 6656587 -6751682 #> 5        30.75    -22.25004 6744357 -6722482 #> 6        31.25    -22.25004 6831955 -6692770"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_10-check-for-colinearity-using-rm_correlated","dir":"","previous_headings":"Step-by-Step Workflow","what":"10. Check for colinearity using rm_correlated()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Identify remove highly correlated environmental variables reduce multicollinearity subsequent analyses. step ensures model stability retaining informative, non-redundant predictors based user-defined correlation threshold.","code":"# Remove the highly correlated variables env_vars_reduced = rm_correlated(data = env_df[,c(4,6:24)],                                  cols = NULL,                                  threshold = 0.7,                                  plot = TRUE) #> Variables removed due to high correlation: #>  [1] \"temp_rang\"  \"temp_sea\"   \"mdr\"        \"temp_max\"   \"rain_mean\"  \"rain_dryQ\"  \"temp_min\"   #>  [8] \"temp_warmQ\" \"temp_coldQ\" \"rain_coldQ\" \"rain_wetQ\"  \"rain_wet\"   \"rain_sea\"   #>  #> Variables retained: #> [1] \"obs_sum\"    \"temp_mean\"  \"iso\"        \"temp_wetQ\"  \"temp_dryQ\"  \"rain_dry\"   \"rain_warmQ\"  # Compare numbers of environmental variables ncol(env_df[,c(4,6:24)]) #> [1] 20 ncol(env_vars_reduced) #> [1] 7"},{"path":[]},{"path":"https://macsands.github.io/dissmapr/index.html","id":"expectation-of-zeta-diversity-decline-using-zetadivzetadeclineex","dir":"","previous_headings":"Step-by-Step Workflow > 11. Calculate Zeta decline for orders 2:15","what":"Expectation of zeta diversity decline using zetadiv::Zeta.decline.ex()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Computes expectation zeta diversity, number species shared multiple assemblages range orders (number assemblages sites), using formula based occupancy species, fits decline exponential power law relationship. Generate statistics figures, maps  Panel 1 (Zeta diversity decline): Shows rapidly species common across multiple sites decline look groups sites simultaneously (increasing zeta order). sharp drop means fewer species shared among many sites compared just . Panel 2 (Ratio zeta diversity decline): Illustrates proportion shared species remain number sites compared increases. steeper curve indicates common species quickly become rare across multiple sites. Panel 3 (Exponential regression): Tests decline shared species fits exponential decrease. straight line indicates species commonness decreases rapidly consistently sites considered together. Exponential regression represents stochastic assembly (randomness determining species distributions). Panel 4 (Power law regression): Tests decline follows power law relationship. straight line suggests loss common species follows predictable pattern, initially many species shared among fewer sites, rapidly fewer shared among larger groups. Power law regression represents niche-based sorting (environmental factors shaping species distributions). Interpretation: near‐perfect straight line exponential panel (high R²) indicates exponential model provides parsimonious description species shared across sites decline add sites—consistent stochastic, memory-less decline common species. power law also fit broad strokes, deviates high orders, suggesting exponential decay better choice data.","code":"zeta_decline_ex = Zeta.decline.ex(site_spp_pa[,6:ncol(site_spp_pa)],                                    orders = 1:15)"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"zeta-diversity-decline-using-monte-carlo-sampling-zetadivzetadeclinemc","dir":"","previous_headings":"Step-by-Step Workflow > 11. Calculate Zeta decline for orders 2:15","what":"Zeta diversity decline using Monte Carlo sampling zetadiv::Zeta.decline.mc()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Computes zeta diversity, number species shared multiple assemblages, range orders (number assemblages sites), using combinations sampled sites, fits decline exponential power law relationship. Generate statistics figures, maps  Panel 1 (Zeta diversity decline): Rapidly declining zeta diversity, similar previous plots, indicates species remain shared across increasingly larger sets sites, emphasizing strong species turnover spatial specialization. Panel 2 (Ratio zeta diversity decline): irregular fluctuations suggest spatial effect: nearby sites might occasionally share species chance due proximity. spikes mean certain groups neighboring sites higher--average species overlap. Panel 3 & 4 (Exponential Power law regressions): remain linear, clearly indicating zeta diversity declines consistently following predictable spatial pattern. However, exact pattern remains similar previous cases, highlighting despite spatial constraints, common species become rare quickly sites considered.result demonstrates clear spatial structuring biodiversity—species locally clustered, randomly distributed across landscape. Spatial proximity influences species co-occur frequently. practice use Zeta.decline.mc real‐world biodiversity data—scales Monte Carlo envelope invaluable ζₖ gets noisier higher orders.","code":"zeta_mc_utm = Zeta.decline.mc(site_spp_pa[,-(1:6)],                                xy_utm_df[,3:4],                                orders = 1:15,                                sam = 100,                                NON = TRUE,                                normalize = \"Jaccard\")"},{"path":[]},{"path":"https://macsands.github.io/dissmapr/index.html","id":"zeta-distance-decay-for-a-range-of-numbers-of-assemblages-or-sites-using-zetadivzetaddecays","dir":"","previous_headings":"Step-by-Step Workflow > 12. Calculate Zeta decay for orders 2:8","what":"Zeta distance decay for a range of numbers of assemblages or sites using zetadiv::Zeta.ddecays()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Computes distance decay zeta diversity range orders (number assemblages sites), using generalised linear models. Generate statistics figures, maps  plot shows zeta diversity (metric captures shared species composition among multiple sites) changes spatial distance across different orders zeta (.e., number sites considered ). x-axis, order zeta (2 7). example, zeta order 2 looks pairs sites, order 3 triplets, etc. y-axis, see slope relationship zeta diversity distance (.e., quickly species similarity declines distance). negative slope means sites farther apart fewer species common — ’s clear distance decay biodiversity. slope near zero means distance doesn’t strongly affect many species shared among sites. Key observations: - low orders (2 3), slope strongly negative, indicating species turnover high distance looking pairs triplets sites. - order 4 , slope becomes close zero, suggesting broader spatial scales (sites), species similarity less affected distance. may reflect widespread core species consistently shared regardless location. - confidence intervals (error bars) shrink increasing order, indicating greater stability reliability estimate sites included. Summary: figure shows biodiversity patterns across space strongly shaped distance small scales, effect weakens include sites. words, rare localized species contribute strong distance decay, widespread species dominate higher spatial scales, leading uniformity. Species occur just two three sites show clear “farther apart → fewer shared species” pattern. ask handful really widespread species (present four, five, sites), shared‐species counts longer decline distance—form spatially uniform core.","code":"# Calculate Zeta.ddecays zeta_decays = Zeta.ddecays(xy_utm_df[,3:4],                           site_spp_pa[,-(1:6)],                           sam = 1000,                           orders = 2:8,                           plot = TRUE,                           confint.level = 0.95 ) #> [1] 2 #> [1] 3 #> [1] 4 #> [1] 5 #> [1] 6 #> [1] 7 #> [1] 8"},{"path":[]},{"path":"https://macsands.github.io/dissmapr/index.html","id":"multi-site-generalised-dissimilarity-modelling-for-a-set-of-environmental-variables-and-distances-using-zetadivzetamsgdm","dir":"","previous_headings":"Step-by-Step Workflow > 13. Run a Multi-Site Generalised Dissimilarity Model for order 2","what":"Multi-site generalised dissimilarity modelling for a set of environmental variables and distances using zetadiv::Zeta.msgdm()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Computes regression model zeta diversity given order (number assemblages sites) set environmental variables distances sites. different regression models available generalised linear models, generalised linear models negative constraints, generalised additive models, shape constrained additive models, -splines. Generate statistics figures, maps save fitted order 2 model ‘zeta2’  figure shows fitted -splines multi-site generalized dissimilarity model (via Zeta.msgdm), represent partial, monotonic relationship predictor community turnover (ζ-diversity) 0–1 “rescaled” range. key take-aways: Distance (blue asterisks) far largest -spline amplitude—rising ~0 zero distance ~0.05 maximum. tells us spatial separation strongest driver multi‐site turnover, even small increases distance yield substantial drop shared species. Sampling intensity (obs_sum, open circles) comes next, gentle steady rise ~0.045. indicates sites observations tend share species (, conversely, incomplete sampling can depress apparent turnover). Precipitation variables: Rain warm quarter (rain_warmQ, squares) Rain dry quarter (rain_dry, triangles-) show moderate effects (-spline heights ~0.02–0.03). means differences seasonal rainfall regimes contribute noticeably changes community composition. Temperature metrics: Mean temperature (temp_mean, triangles-), Wet‐quarter temperature (temp_wetQ, X’s), Dry‐quarter temperature (temp_dryQ, diamonds), isothermality index (iso, plus signs) low, almost flat -splines (max heights ≲0.01). words, thermal variables explain little additional turnover ’ve accounted distance rainfall. Ecological interpretation: Spatial distance dominant structuring factor data—sites apart share markedly fewer species. accounting , differences observation effort , lesser degree, seasonal rainfall still shape multisite community similarity. Temperature seasonality metrics, contrast, appear minor independent influence zeta‐diversity landscape.","code":"# Compute a regression model of zeta diversity order 2 zeta2 = Zeta.msgdm(site_spp_pa[,-(1:6)],                    env_vars_reduced[,-8],                    # xy_utm_df[,3:4],                    xy[,1:2],                    sam = 1000,                    order = 2,                    distance.type = \"Euclidean\",# \"ortho\",                    normalize = \"Jaccard\",                    reg.type = \"ispline\")  # Compute splines coordinates from I-spline-based MSGDM zeta2.ispline = Return.ispline(zeta2,                                env_vars_reduced[,-8],                                # legend = FALSE,                                distance = TRUE) # zeta2.ispline Plot.ispline(isplines = zeta2.ispline, distance = TRUE) # Deviance explained summary results with(summary(zeta2$model), 1 - deviance/null.deviance)  #> [1] 0.264315 # [1] 0.2461561 # 0.2461561 means that approximately 24.6% of the variability in the response # variable is explained by your model. This is relatively low, suggesting that the # model may not be capturing much of the underlying pattern in the data.  # Model summary results summary(zeta2$model) #>  #> Call: #> glm.cons(formula = zeta.val ~ ., family = family, data = data.tot,  #>     control = control, method = \"glm.fit.cons\", cons = cons,  #>     cons.inter = cons.inter) #>  #> Coefficients: #>              Estimate Std. Error t value Pr(>|t|)     #> (Intercept)  0.103685   0.007458  13.903  < 2e-16 *** #> obs_sum1    -0.047222   0.003601 -13.112  < 2e-16 *** #> obs_sum2     0.000000   0.016421   0.000 1.000000     #> obs_sum3     0.000000   0.021894   0.000 1.000000     #> temp_mean1   0.000000   0.035343   0.000 1.000000     #> temp_mean2  -0.009559   0.012775  -0.748 0.454502     #> temp_mean3   0.000000   0.015940   0.000 1.000000     #> iso1        -0.004022   0.013746  -0.293 0.769874     #> iso2         0.000000   0.009277   0.000 1.000000     #> iso3         0.000000   0.013286   0.000 1.000000     #> temp_wetQ1   0.000000   0.011252   0.000 1.000000     #> temp_wetQ2  -0.004848   0.009588  -0.506 0.613246     #> temp_wetQ3  -0.003618   0.013219  -0.274 0.784346     #> temp_dryQ1  -0.005572   0.033097  -0.168 0.866337     #> temp_dryQ2  -0.006185   0.010479  -0.590 0.555161     #> temp_dryQ3   0.000000   0.011843   0.000 1.000000     #> rain_dry1   -0.018325   0.007454  -2.458 0.014127 *   #> rain_dry2    0.000000   0.009306   0.000 1.000000     #> rain_dry3    0.000000   0.014403   0.000 1.000000     #> rain_warmQ1 -0.002312   0.008321  -0.278 0.781217     #> rain_warmQ2 -0.015782   0.010613  -1.487 0.137324     #> rain_warmQ3  0.000000   0.020082   0.000 1.000000     #> distance1   -0.040602   0.011229  -3.616 0.000315 *** #> distance2    0.000000   0.011820   0.000 1.000000     #> distance3   -0.013797   0.015469  -0.892 0.372669     #> --- #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 #>  #> (Dispersion parameter for gaussian family taken to be 0.001674497) #>  #>     Null deviance: 2.2192  on 999  degrees of freedom #> Residual deviance: 1.6326  on 975  degrees of freedom #> AIC: -3527.7 #>  #> Number of Fisher Scoring iterations: 2"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_14-predict-current-zeta-diversity-zeta2-using-predict_dissim","dir":"","previous_headings":"Step-by-Step Workflow","what":"14. Predict current Zeta Diversity (zeta2) using predict_dissim()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"‘sbe’ add ‘sam.max’, constant sites = max(sam.eff) Predict updated sbe xy Produce site site matrix predicted zeta ‘zeta.now’  Run nmds predicted zeta matrix Plot RGB 3 component scores","code":"# Predict current zeta diversity using `predict_dissim` with sampling effort, geographic distance and environmental variables # Only non-colinear environmental variables used in `zeta2` model predictors_df = predict_dissim(   block_sp   = grid_spp[,-c(4:6)],   sbe        = sbe[,-c(1:3)],# env_vars_reduced[,-8]   zeta_model = zeta2,   mean_rich  = mean_rich_o1234,   mean_turn  = mean_turn_o2345,   sbs_xy     = xy,   x_col      = \"centroid_lon\",   y_col      = \"centroid_lat\",   rsa        = rsa ) # Check results dim(predictors_df) #> [1] 415  29 head(predictors_df[,1:7]) #>   obs_sum spp_rich temp_mean      mdr      iso temp_sea temp_max #> 1       3        2  21.88425 14.47900 55.67347 427.1824   32.446 #> 2      41       31  21.76921 14.61358 53.90477 453.1160   32.977 #> 3      10       10  21.53492 14.00267 56.31250 392.8977   31.662 #> 4       7        7  23.01796 13.67825 57.83615 357.9102   32.791 #> 5       6        6  23.59879 13.83525 59.58590 334.4157   33.509 #> 6     107       76  24.57367 14.64933 61.67101 332.0319   34.788"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_15-run-clustering-analyses-using-map_bioreg","dir":"","previous_headings":"Step-by-Step Workflow","what":"15. Run clustering analyses using map_bioreg()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"Map bioregion clusters current zeta2 Generate maps dissimilarity (rgb plot) Generate map bioregions (clustering)","code":"# Run `map_bioreg` function to generate and plot clusters bioreg_result = map_bioreg(   data = predictors_df,   scale_cols = c(\"pred_zeta\", \"centroid_lon\", \"centroid_lat\"),   clus_method = \"all\", # K-means, PAM, Hierarchical and GMM clustering   plot = TRUE,   interp = \"both\",   x_col ='centroid_lon',   y_col ='centroid_lat' ) #> fitting ... #>   |                                                                                                        |                                                                                                |   0%  |                                                                                                        |======                                                                                          |   7%  |                                                                                                        |=============                                                                                   |  13%  |                                                                                                        |===================                                                                             |  20%  |                                                                                                        |==========================                                                                      |  27%  |                                                                                                        |================================                                                                |  33%  |                                                                                                        |======================================                                                          |  40%  |                                                                                                        |=============================================                                                   |  47%  |                                                                                                        |===================================================                                             |  53%  |                                                                                                        |==========================================================                                      |  60%  |                                                                                                        |================================================================                                |  67%  |                                                                                                        |======================================================================                          |  73%  |                                                                                                        |=============================================================================                   |  80%  |                                                                                                        |===================================================================================             |  87%  |                                                                                                        |==========================================================================================      |  93%  |                                                                                                        |================================================================================================| 100%"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_16-predict-future-zeta-diversity-and-map-bioregion-change-using-map_bioregdiff","dir":"","previous_headings":"Step-by-Step Workflow","what":"16. Predict future Zeta Diversity and map bioregion change using map_bioregDiff()","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"appended (future scenarios) environmental variables ‘sam.max’ sbe m number scenarios plus present scenario (step 14) n sites xy Updated sbe.future k = (m+1) x n number rows ‘xy’ also updated k rows Predict k k matrix predicted zeta ‘zeta.future’  Nmds zeta.future Clustering zeta.future Map sub matrices indicate predicted future dissimilarity Map predicted future bioregions Map temporal turnover Note: step 14 redundant step 16 neededNote: step 16 code results including step 6 potentially computational demanding","code":"# NOT RUN YET # future_df = predict_dissim( #   block_sp   = grid_spp[,-c(4:6)], #   sbe        = sbe[,-c(1:3)], #   zeta_model = zeta2, #   mean_rich  = mean_rich_o1234, #   mean_turn  = mean_turn_o2345, #   sbs_xy     = sbs_xy, #   x_col      = \"centroid_lon\", #   y_col      = \"centroid_lat\", #   rsa        = rsa # )  # Check results # dim(future_df) # head(future_df[,1:7])  # Run `map_bioregDiff` # 'approach', specifies which metric to compute: # >> \"difference_count\": Counts cells with differing values across layers # >> \"shannon_entropy\": Calculates Shannon entropy, measuring diversity within layers # >> \"stability\": Identifies stable regions where values remain unchanged. # >> \"transition_frequency\": Quantifies the frequency of changes between layers # >> \"weighted_change_index\": Weighted score to changes based on a dissimilarity matrix # >> \"all\" (default): Returns all metrics as a combined SpatRaster  result_bioregDiff = map_bioregDiff(bioreg_result$clusters,                                     approach = \"all\")  # See results result_bioregDiff #> class       : SpatRaster  #> dimensions  : 25, 32, 5  (nrow, ncol, nlyr) #> resolution  : 0.5, 0.4999984  (x, y) #> extent      : 16.75, 32.75, -34.75, -22.25004  (xmin, xmax, ymin, ymax) #> coord. ref. : lon/lat WGS 84 (EPSG:4326)  #> source(s)   : memory #> names       : Differ~_Count, Shanno~ntropy, Stability, Transi~quency, Weight~_Index  #> min values  :             0,      0.000000,         0,             0,       0.00000  #> max values  :             3,      1.039721,         1,             3,       2.52819  # Mask `result_bioregDiff` to the RSA boundary mask_bioregDiff = mask(resample(result_bioregDiff, grid_masked, method = \"near\"), grid_masked)  # Plot all change results plot(mask_bioregDiff, col = viridis(100, direction = -1))"},{"path":"https://macsands.github.io/dissmapr/index.html","id":"id_17-deposit-all-results-into-zenodo","dir":"","previous_headings":"Step-by-Step Workflow","what":"17. Deposit all results into Zenodo","title":"Workflow for Compositional Dissimilarity and Biodiversity Turnover Analysis","text":"data frames, tables, maps, standard metadata can deposited Zenodo using zen4R Zenodo UI.","code":"# save(occ, sbs, sbe, zeta2, zeta_now, zeta_future, file=\"dissmapr_results.Rdata\") # use zen4R or Zenodo UI to upload archive"},{"path":"https://macsands.github.io/dissmapr/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 Stellenbosch University Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/abund.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Species Abundance — abund","title":"Calculate Species Abundance — abund","text":"Sums total individuals per site; reports absolute pairwise differences dispersion metrics higher orders.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/abund.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Species Abundance — abund","text":"","code":"abund(vec_from, vec_to = NULL)"},{"path":"https://macsands.github.io/dissmapr/reference/abund.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Species Abundance — abund","text":"vec_from numeric vector representing species counts first site. vec_to (Optional) numeric vector pairwise higher-order comparisons.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/abund.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Species Abundance — abund","text":"species abundance value.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/assign_mapsheet.html","id":null,"dir":"Reference","previous_headings":"","what":"Add Nearest Mapsheet Code and Center Coordinates — assign_mapsheet","title":"Add Nearest Mapsheet Code and Center Coordinates — assign_mapsheet","text":"function takes existing data frame coordinate columns appends: nearest mapsheet code (format \"E|WDDDN|SDDBB\"), center longitude/latitude mapsheet.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/assign_mapsheet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add Nearest Mapsheet Code and Center Coordinates — assign_mapsheet","text":"","code":"assign_mapsheet(   data,   x_col = \"x\",   y_col = \"y\",   cell_size = 1,   unit = c(\"deg\", \"min\", \"sec\", \"m\") )"},{"path":"https://macsands.github.io/dissmapr/reference/assign_mapsheet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add Nearest Mapsheet Code and Center Coordinates — assign_mapsheet","text":"data data.frame containing least coordinate columns. x_col Character. Name longitude (x) column. Default \"x\". y_col Character. Name latitude (y) column. Default \"y\". cell_size Numeric. Cell size: e.g. 1 1° cells, 15 15′ cells. unit Character. Unit cell_size; one : \"deg\" decimal degrees (default) \"min\" arc-minutes \"sec\" arc-seconds \"m\"   metres (projected coords).","code":""},{"path":"https://macsands.github.io/dissmapr/reference/assign_mapsheet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add Nearest Mapsheet Code and Center Coordinates — assign_mapsheet","text":"input data three new columns: mapsheet: 7-character sheet code center_lon: centre longitude sheet center_lat: centre latitude sheet","code":""},{"path":"https://macsands.github.io/dissmapr/reference/assign_mapsheet.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add Nearest Mapsheet Code and Center Coordinates — assign_mapsheet","text":"divides world regular grid cells (degrees, minutes, seconds, metres), finds cell point falls , formats sheet code based cell centre.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/assign_mapsheet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add Nearest Mapsheet Code and Center Coordinates — assign_mapsheet","text":"","code":"bird_obs = data.frame(   site_id = 1:6,   x = c(22.71862, 20.40034, 18.51368, 18.38477, 23.56160, 18.87285),   y = c(-33.98912, -34.45408, -34.08271, -34.25946, -33.97620, -34.06225),   species = c(\"Fulica cristata\", \"Numida meleagris coronatus\",               \"Anas undulata\", \"Oenanthe familiaris\",               \"Cyanomitra veroxii\", \"Gallinula chloropus\"),   value = rep(1, 6),   year = c(2023, 2022, 2023, 2016, 2016, 2019),   month = c(5, 12, 10, 8, 9, 2),   day = c(12, 4, 3, 1, 4, 21) )  # For 1° mapsheet cells: bird_obs2 = assign_mapsheet(bird_obs, cell_size = 1, unit = \"deg\") #> Error in assign_mapsheet(bird_obs, cell_size = 1, unit = \"deg\"): could not find function \"assign_mapsheet\" head(bird_obs2) #> Error: object 'bird_obs2' not found"},{"path":"https://macsands.github.io/dissmapr/reference/calculate_pairwise_distances_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Pairwise Distance Matrix — calculate_pairwise_distances_matrix","title":"Calculate Pairwise Distance Matrix — calculate_pairwise_distances_matrix","text":"Calculate Pairwise Distance Matrix","code":""},{"path":"https://macsands.github.io/dissmapr/reference/calculate_pairwise_distances_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Pairwise Distance Matrix — calculate_pairwise_distances_matrix","text":"","code":"calculate_pairwise_distances_matrix(   data,   x_col = \"x\",   y_col = \"y\",   distance_fun = distGeo )"},{"path":"https://macsands.github.io/dissmapr/reference/calculate_pairwise_distances_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Pairwise Distance Matrix — calculate_pairwise_distances_matrix","text":"data data frame containing site coordinates IDs. x_col Name longitude column data (default: \"x\"). y_col Name latitude  column data (default: \"y\"). distance_fun distance function use (default: distGeo).","code":""},{"path":"https://macsands.github.io/dissmapr/reference/calculate_pairwise_distances_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Pairwise Distance Matrix — calculate_pairwise_distances_matrix","text":"data frame containing pairwise distances sites (km).","code":""},{"path":"https://macsands.github.io/dissmapr/reference/calculate_pairwise_distances_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Pairwise Distance Matrix — calculate_pairwise_distances_matrix","text":"","code":"# default usage when your coords are in columns \"x\" and \"y\" dist_df_default <- calculate_pairwise_distances_matrix(data = my_sites_df) #> Error in calculate_pairwise_distances_matrix(data = my_sites_df): could not find function \"calculate_pairwise_distances_matrix\" head(dist_df_default) #> Error: object 'dist_df_default' not found  # specify custom column names for longitude and latitude dist_df <- calculate_pairwise_distances_matrix(   data  = my_sites_df,   x_col = \"centroid_lon\",   y_col = \"centroid_lat\" ) #> Error in calculate_pairwise_distances_matrix(data = my_sites_df, x_col = \"centroid_lon\",     y_col = \"centroid_lat\"): could not find function \"calculate_pairwise_distances_matrix\" head(dist_df) #> Error: object 'dist_df' not found"},{"path":"https://macsands.github.io/dissmapr/reference/calculate_pairwise_gower_dist_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Pairwise Gower Dissimilarity Matrix — calculate_pairwise_gower_dist_matrix","title":"Calculate Pairwise Gower Dissimilarity Matrix — calculate_pairwise_gower_dist_matrix","text":"Calculate Pairwise Gower Dissimilarity Matrix","code":""},{"path":"https://macsands.github.io/dissmapr/reference/calculate_pairwise_gower_dist_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Pairwise Gower Dissimilarity Matrix — calculate_pairwise_gower_dist_matrix","text":"","code":"calculate_pairwise_gower_dist_matrix(df, sp_cols)"},{"path":"https://macsands.github.io/dissmapr/reference/calculate_pairwise_gower_dist_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Pairwise Gower Dissimilarity Matrix — calculate_pairwise_gower_dist_matrix","text":"df data frame containing site information. sp_cols vector column names species data.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/calculate_pairwise_gower_dist_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Pairwise Gower Dissimilarity Matrix — calculate_pairwise_gower_dist_matrix","text":"data frame containing pairwise Gower dissimilarities sites.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/compute_orderwise.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Order-wise Metrics — compute_orderwise","title":"Compute Order-wise Metrics — compute_orderwise","text":"function computes metrics ecological data across specified order levels. supports single-site, pairwise, higher-order calculations, allows parallel processing efficiency.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/compute_orderwise.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Order-wise Metrics — compute_orderwise","text":"","code":"compute_orderwise(   df,   func,   site_col,   sp_cols = NULL,   order = 2,   sample_no = NULL,   sample_portion = 1,   parallel = TRUE,   n_workers = parallel::detectCores() - 1 )"},{"path":"https://macsands.github.io/dissmapr/reference/compute_orderwise.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Order-wise Metrics — compute_orderwise","text":"df data frame containing ecological data. func function compute metrics. must accept inputs form species vectors site information depending order. site_col character string specifying column name df representing site IDs. sp_cols vector column names df representing species data (default: NULL). order integer vector integers specifying order(s) computation. 1: Single-site computations. 2: Pairwise computations. >= 3: Higher-order computations. sample_no integer specifying maximum number combinations sample higher-order computations (default: NULL combinations). sample_portion numeric value 0 1 indicating proportion combinations sample higher-order computations (default: 1, meaning 100%). parallel logical value indicating whether enable parallel computation (default: TRUE). n_workers integer specifying number parallel workers use (default: one less number available cores).","code":""},{"path":"https://macsands.github.io/dissmapr/reference/compute_orderwise.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Order-wise Metrics — compute_orderwise","text":"data.table containing results computations. Columns include: site_from: source site. site_to: target site(s) (NA order = 1). order: computation order. value: computed metric value.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/compute_orderwise.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Order-wise Metrics — compute_orderwise","text":"","code":"# Example usage with a custom metric function metric_func = function(vec1, vec2 = NULL) {   if (is.null(vec2)) {     return(sum(vec1))  # Example: species richness   } else {     return(sum((vec1 - vec2)^2))  # Example: pairwise dissimilarity   } }  data = data.frame(   site = rep(letters[1:3], each = 3),   sp1 = c(1, 0, 2, 1, 2, 0, 0, 1, 1),   sp2 = c(0, 1, 1, 2, 0, 0, 1, 0, 2) )  # SPECIES RICHNESS # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ richness = function(vec_from, vec_to = NULL) {  if (is.null(vec_to)) {    # Handle single-site calculations (order = 1)    return(sum(vec_from != 0, na.rm = TRUE))  } else if (length(vec_from) > 1 && length(vec_to) > 1) {    # Handle pairwise or higher-order comparisons    return(abs(sum(vec_from != 0, na.rm = TRUE) - sum(vec_to != 0, na.rm = TRUE)))  } else {    # Invalid input case    return(NA)  } }  rich_o12 = compute_orderwise(  df = block_sp,  func = richness,  site_col = 'grid_id',  sp_cols = sp_cols,  # sample_no = 1000,  # sample_portion = 0.5,  # Default is 1 (100%)  order = 1:2,  # Compute for pairwise and higher-order comparisons  parallel = TRUE,  n_workers = 4 ) #> Error in compute_orderwise(df = block_sp, func = richness, site_col = \"grid_id\",     sp_cols = sp_cols, order = 1:2, parallel = TRUE, n_workers = 4): could not find function \"compute_orderwise\" head(rich_o12) #> Error: object 'rich_o12' not found"},{"path":"https://macsands.github.io/dissmapr/reference/cor_pears.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Pearson's Correlation — cor_pears","title":"Calculate Pearson's Correlation — cor_pears","text":"Pearson’s correlation linear abundance relationships; aggregated across sites.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/cor_pears.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Pearson's Correlation — cor_pears","text":"","code":"cor_pears(vec_from, vec_to)"},{"path":"https://macsands.github.io/dissmapr/reference/cor_pears.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Pearson's Correlation — cor_pears","text":"vec_from numeric vector representing species abundances first site. vec_to numeric vector representing species abundances second site.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/cor_pears.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Pearson's Correlation — cor_pears","text":"Pearson's correlation coefficient.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/cor_spear.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Spearman's Rank Correlation — cor_spear","title":"Calculate Spearman's Rank Correlation — cor_spear","text":"Spearman’s rank correlation abundances; pairwise averaged multi-site.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/cor_spear.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Spearman's Rank Correlation — cor_spear","text":"","code":"cor_spear(vec_from, vec_to)"},{"path":"https://macsands.github.io/dissmapr/reference/cor_spear.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Spearman's Rank Correlation — cor_spear","text":"vec_from numeric vector representing species abundances first site. vec_to numeric vector representing species abundances second site.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/cor_spear.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Spearman's Rank Correlation — cor_spear","text":"Spearman's rank correlation coefficient.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/diss_bcurt.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Bray-Curtis Dissimilarity — diss_bcurt","title":"Calculate Bray-Curtis Dissimilarity — diss_bcurt","text":"Bray–Curtis dissimilarity abundances; 0–1 pairwise, averages totals multi-site.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/diss_bcurt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Bray-Curtis Dissimilarity — diss_bcurt","text":"","code":"diss_bcurt(vec_from, vec_to)"},{"path":"https://macsands.github.io/dissmapr/reference/diss_bcurt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Bray-Curtis Dissimilarity — diss_bcurt","text":"vec_from numeric vector representing species abundances first site. vec_to numeric vector species abundances second site.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/diss_bcurt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Bray-Curtis Dissimilarity — diss_bcurt","text":"Bray-Curtis dissimilarity value.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/distance.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Distance Between Sites — distance","title":"Calculate Distance Between Sites — distance","text":"Calculate Distance Sites","code":""},{"path":"https://macsands.github.io/dissmapr/reference/distance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Distance Between Sites — distance","text":"","code":"distance(df, site_col, vec_from, vec_to = NULL, coord_cols = c(\"x\", \"y\"))"},{"path":"https://macsands.github.io/dissmapr/reference/distance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Distance Between Sites — distance","text":"df data frame containing site coordinates. site_col column name representing site IDs. vec_from site ID vector starting site. vec_to site ID vector destination site(s).","code":""},{"path":"https://macsands.github.io/dissmapr/reference/distance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Distance Between Sites — distance","text":"Distance(s) meters specified sites.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/format_df.html","id":null,"dir":"Reference","previous_headings":"","what":"Format Biodiversity Records to Long / Wide — format_df","title":"Format Biodiversity Records to Long / Wide — format_df","text":"Converts table biodiversity observations long wide layouts standardising key column names. Long format – one row per observation columns site_id, x, y, species, value (+ optional extra_cols). Wide format – one row per site species individual columns.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/format_df.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format Biodiversity Records to Long / Wide — format_df","text":"","code":"format_df(   data,   format = NULL,   x_col = NULL,   y_col = NULL,   site_id_col = NULL,   species_col = NULL,   value_col = NULL,   sp_col_range = NULL,   extra_cols = NULL )"},{"path":"https://macsands.github.io/dissmapr/reference/format_df.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format Biodiversity Records to Long / Wide — format_df","text":"data data frame containing biodiversity records. format Character; target layout \"long\" \"wide\". NULL format inferred automatically. x_col, y_col Character. Names longitude (x) latitude (y) columns. NULL, common alternatives searched. site_id_col Character. Column giving unique site identifier. NULL, new site_id generated coordinate pair. species_col Character. Column containing species names (required format = \"long\"). value_col Character. Column numeric values presence/absence (0/1) abundance. NULL, record assigned value 1. sp_col_range Integer vector giving index species columns format = \"wide\". NULL non-coordinate / non-metadata columns treated species. extra_cols Character vector additional columns carry output (e.g. sampling metadata environmental covariates).","code":""},{"path":"https://macsands.github.io/dissmapr/reference/format_df.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format Biodiversity Records to Long / Wide — format_df","text":"named list two elements site_obs – long-format data frame (returned format = \"long\"). site_spp – wide site × species data frame.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/format_df.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Format Biodiversity Records to Long / Wide — format_df","text":"column names supplied, function attempts detect common variants (e.g. \"lon\", \"longitude\" x). converting long → wide, duplicate observations species site aggregated summing value. converting wide → long, species columns inferred either sp_col_range excluding coordinate / metadata columns.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/format_df.html","id":"dependencies","dir":"Reference","previous_headings":"","what":"Dependencies","title":"Format Biodiversity Records to Long / Wide — format_df","text":"Relies dplyr, tidyr, rlang (loaded requireNamespace()).","code":""},{"path":[]},{"path":"https://macsands.github.io/dissmapr/reference/format_df.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format Biodiversity Records to Long / Wide — format_df","text":"","code":"## --- Example 1: long  →  wide -------------------------------------------- ex_long <- data.frame(   lon     = c(23.10, 23.10, 23.25, 23.25),   lat     = c(-34.00, -34.00, -34.05, -34.05),   species = c(\"sp1\",  \"sp2\",  \"sp1\",  \"sp3\"),   count   = c(1, 2, 3, 1) )  out_long <- format_df(   data        = ex_long,   format      = \"long\",   x_col       = \"lon\",   y_col       = \"lat\",   species_col = \"species\",   value_col   = \"count\" ) #> Error in format_df(data = ex_long, format = \"long\", x_col = \"lon\", y_col = \"lat\",     species_col = \"species\", value_col = \"count\"): could not find function \"format_df\"  head(out_long$site_spp) #> Error: object 'out_long' not found  ## --- Example 2: wide →  long -------------------------------------------- ex_wide <- out_long$site_spp #> Error: object 'out_long' not found  out_wide <- format_df(   data   = ex_wide,   format = \"wide\" ) #> Error in format_df(data = ex_wide, format = \"wide\"): could not find function \"format_df\"  head(out_wide$site_spp) #> Error: object 'out_wide' not found"},{"path":"https://macsands.github.io/dissmapr/reference/generate_grid.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Spatial Grid — generate_grid","title":"Generate Spatial Grid — generate_grid","text":"function generates spatial grid geographic extent assigns grid IDs points. also computes cell centroids , geographic grids (degrees minutes), mapsheet code. Finally, summarizes specified columns within grid cell preserving additional metadata provided via extra_cols.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/generate_grid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Spatial Grid — generate_grid","text":"","code":"generate_grid(   data,   x_col = \"x\",   y_col = \"y\",   grid_size = 0.5,   sum_col_range = NULL,   extra_cols = NULL,   crs_epsg = 4326,   unit = c(\"deg\", \"min\", \"sec\", \"m\") )"},{"path":"https://macsands.github.io/dissmapr/reference/generate_grid.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Spatial Grid — generate_grid","text":"data data frame containing point data x y coordinates. x_col Character. Column name x-coordinates (default: \"x\"). y_col Character. Column name y-coordinates (default: \"y\"). grid_size Numeric. Size grid cells. geographic data (EPSG:4326) degrees. sum_col_range Numeric vector. Range columns summarize within grid cell. extra_cols Character vector additional columns retain output (optional). crs_epsg Numeric. EPSG code coordinate reference system (default: 4326). unit Character. One \"deg\", \"min\", \"sec\", \"m\". geographic data use \"deg\" (default).","code":""},{"path":"https://macsands.github.io/dissmapr/reference/generate_grid.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Spatial Grid — generate_grid","text":"list containing: grid: terra raster object generated grid unique grid IDs. grid_sf: sf object grid polygons, added centroid coordinates (applicable) mapsheet codes. block_sp: Data frame summarizing grid cell contents (including extra_cols provided).","code":""},{"path":"https://macsands.github.io/dissmapr/reference/generate_grid.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Spatial Grid — generate_grid","text":"","code":"set.seed(123) data <- data.frame(   x = runif(100, -10, 10),   y = runif(100, -10, 10),   species1 = rpois(100, 5),   species2 = rpois(100, 3),   recordedBy = sample(LETTERS, 100, replace = TRUE) ) grid_result <- generate_grid(data, x_col = \"x\", y_col = \"y\",                              grid_size = 1, sum_col_range = 3:4,                              extra_cols = c(\"recordedBy\")) #> Error in generate_grid(data, x_col = \"x\", y_col = \"y\", grid_size = 1,     sum_col_range = 3:4, extra_cols = c(\"recordedBy\")): could not find function \"generate_grid\" print(grid_result$block_sp) #> Error: object 'grid_result' not found plot(grid_result$grid_sf[\"grid_id\"]) #> Error: object 'grid_result' not found"},{"path":"https://macsands.github.io/dissmapr/reference/geodist_helper.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate geographic distance via Haversine formula (helper) — geodist_helper","title":"Calculate geographic distance via Haversine formula (helper) — geodist_helper","text":"Computes geographic (Haversine) distance meters two coordinate pairs, returns 0 single-site (order=1) calculations vec_to NULL.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/geodist_helper.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate geographic distance via Haversine formula (helper) — geodist_helper","text":"","code":"geodist_helper(   vec_from,   vec_to = NULL,   coord_cols = c(\"centroid_lon\", \"centroid_lat\") )"},{"path":"https://macsands.github.io/dissmapr/reference/geodist_helper.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate geographic distance via Haversine formula (helper) — geodist_helper","text":"vec_from Numeric vector length 2, named vector containing coordinates. named, include names given coord_cols. vec_to Optional numeric vector length 2 (destination coordinates); NULL (default), function returns 0. coord_cols Character vector length 2 giving names longitude latitude elements vec_from/vec_to named vectors. Defaults c(\"x\", \"y\").","code":""},{"path":"https://macsands.github.io/dissmapr/reference/geodist_helper.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate geographic distance via Haversine formula (helper) — geodist_helper","text":"Numeric distance meters two points, 0 vec_to NULL.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/get_enviro_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Environmental Data — get_enviro_data","title":"Get Environmental Data — get_enviro_data","text":"function retrieves environmental data spatial points, either downloading data specified sources (e.g., WorldClim, SoilGrids) using local raster files. Data extracted buffer region around input points, missing values interpolated using surrounding values.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/get_enviro_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Environmental Data — get_enviro_data","text":"","code":"get_enviro_data(   data,   buffer_km = 10,   source = \"geodata\",   var = \"bio\",   res = 2.5,   path = \"data/\",   year = NULL,   depth = NULL,   stat = \"mean\",   model = NULL,   ssp = NULL,   time = NULL,   temporal = FALSE,   time_col = \"year\",   layer_split_char = NULL,   sp_cols = NULL,   ext_cols = NULL )"},{"path":"https://macsands.github.io/dissmapr/reference/get_enviro_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Environmental Data — get_enviro_data","text":"data data frame containing spatial points x y coordinates. buffer_km Numeric. Buffer distance around input points kilometers (default: 10). source Character. Data source: \"geodata\" downloading \"local\" local rasters (default: \"geodata\"). var Character. Variable retrieve (e.g., \"bio\" bioclimatic variables, \"elev\" elevation). res Numeric. Resolution environmental data arc-minutes (default: 2.5). path Character. Directory path store downloaded data load local rasters (default: \"data/\"). year Numeric. Year temporal data (e.g., population footprint datasets; required specific datasets). depth Character. Depth range soil data (e.g., \"0-5cm\"). stat Character. Statistic summarize soil data (e.g., \"mean\"). model Character. Climate model CMIP6 projections (e.g., \"ACCESS-CM2\"). ssp Numeric. Shared Socioeconomic Pathway CMIP6 (e.g., 245 SSP2-4.5). time Character. Time period CMIP6 projections (e.g., \"2041-2060\").","code":""},{"path":"https://macsands.github.io/dissmapr/reference/get_enviro_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Environmental Data — get_enviro_data","text":"list containing: env_rast: Raster environmental data area interest. sites_sf: Spatial points sf object. env_df: Data frame combining input data extracted environmental variables.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/get_enviro_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Environmental Data — get_enviro_data","text":"","code":"# Example usage: data = data.frame(site_id = 1:5, x = c(10, 12, 14, 16, 18), y = c(20, 22, 24, 26, 28)) env_data = get_enviro_data(data, buffer_km = 5, var = \"bio\", res = 2.5, path = \"data/\") #> Error in get_enviro_data(data, buffer_km = 5, var = \"bio\", res = 2.5,     path = \"data/\"): could not find function \"get_enviro_data\" plot(env_data$env_rast[[1]]) #> Error: object 'env_data' not found points(env_data$sites_sf) #> Error: object 'env_data' not found"},{"path":"https://macsands.github.io/dissmapr/reference/get_occurrence_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Import and harmonise biodiversity-occurrence data — get_occurrence_data","title":"Import and harmonise biodiversity-occurrence data — get_occurrence_data","text":"get_occurrence_data() reads occurrence records local CSV/file path, -memory data.frame, GBIF download (ZIP) returns tidy data frame either long (one row = one record) wide (one row = one site, one column = one species) form.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/get_occurrence_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Import and harmonise biodiversity-occurrence data — get_occurrence_data","text":"","code":"get_occurrence_data(   data = NULL,   source_type = c(\"local_csv\", \"data_frame\", \"gbif\"),   gbif_zip_url = NULL,   download_dir = tempdir(),   sep = \",\",   site_id_col = NULL,   x_col = NULL,   y_col = NULL,   sp_name_col = NULL,   pa_col = NULL,   abund_col = NULL,   species_cols = NULL )"},{"path":"https://macsands.github.io/dissmapr/reference/get_occurrence_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Import and harmonise biodiversity-occurrence data — get_occurrence_data","text":"data File path (source_type = \"local_csv\"), -memory data.frame (\"data_frame\"), NULL (\"gbif\"). source_type \"local_csv\", \"data_frame\", \"gbif\". gbif_zip_url URL GBIF download ZIP (required source_type = \"gbif\"). download_dir Folder save ZIP/extracted file (default: tempdir()). sep Field separator CSVs (default \",\"). site_id_col, x_col, y_col, sp_name_col, pa_col, abund_col Optional custom column names. species_cols Optional numeric character vector specifying species columns wide input (e.g. 4:11 c(\"Sp1\",\"Sp2\")).  Overrides default \"sp_*\" detection.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/get_occurrence_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Import and harmonise biodiversity-occurrence data — get_occurrence_data","text":"data.frame: Long format Columns site_id, x, y, sp_name, plus pa abund. Wide → long columns stacking specified auto-detected species columns.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/get_occurrence_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Import and harmonise biodiversity-occurrence data — get_occurrence_data","text":"Column names auto-detected common patterns (\"site_id\", \"x\", \"y\", \"sp_name\", \"pa\" \"abund\"). Supply *_col arguments data use different names. wide data helper normally looks columns start \"sp_\".  Set species_cols numeric range (e.g. 4:11) character vector column names species columns follow \"sp_*\" convention.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/get_occurrence_data.html","id":"workflow","dir":"Reference","previous_headings":"","what":"Workflow","title":"Import and harmonise biodiversity-occurrence data — get_occurrence_data","text":"Read data source_type. Detect / insert compulsory columns (site, coords, species, value). Validate coordinates (-180 ≤ lon ≤ 180, -90 ≤ lat ≤ 90). Return long table (site_id, x, y, sp_name, pa|abund) species name + value columns present; long table reshaped wide species columns.","code":""},{"path":[]},{"path":"https://macsands.github.io/dissmapr/reference/get_occurrence_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Import and harmonise biodiversity-occurrence data — get_occurrence_data","text":"","code":"# 1. Local CSV example ----------------------------------------------- tmp <- tempfile(fileext = \".csv\") df_local <- data.frame(   site_id = 1:10,   x = runif(10), y = runif(10),   sp_name = c(\"plant1\", \"plant2\",\"plant3\", \"plant4\",\"plant5\", \"plant1\", \"plant2\",\"plant3\", \"plant4\",\"plant5\"),   abun = sample(0:20, size = 10, replace = TRUE) ) write.csv(df_local, tmp, row.names = FALSE) local_test = get_occurrence_data(data = tmp, source_type = \"local_csv\", sep = \",\") #> Error in get_occurrence_data(data = tmp, source_type = \"local_csv\", sep = \",\"): could not find function \"get_occurrence_data\"  # 2. Existing wide-format data.frame ----------------------------------------------- df_wide <- df_local %>%   pivot_wider(     names_from  = sp_name,   # these become column names     values_from = abun,  # fill these cell values     values_fn   = sum,       # sum duplicates     values_fill = 0          # fill missing with 0   ) #> Error in df_local %>% pivot_wider(names_from = sp_name, values_from = abun,     values_fn = sum, values_fill = 0): could not find function \"%>%\" wide_test = get_occurrence_data(data = df_wide, source_type = \"data_frame\", species_cols = 4:11) #> Error in get_occurrence_data(data = df_wide, source_type = \"data_frame\",     species_cols = 4:11): could not find function \"get_occurrence_data\"  # 3. Custom names ---------------------------------------------------------- names(sim_dat)[1:5] <- c(\"plot_id\", \"lon\", \"lat\", \"taxon\", \"presence\") #> Error: object 'sim_dat' not found occ_long2 <- get_occurrence_data(   data           = sim_dat,   source_type    = \"data_frame\",   site_id_col    = \"plot_id\",   x_col          = \"lon\",   y_col          = \"lat\",   sp_name_col    = \"taxon\",   pa_col         = \"presence\" ) #> Error in get_occurrence_data(data = sim_dat, source_type = \"data_frame\",     site_id_col = \"plot_id\", x_col = \"lon\", y_col = \"lat\", sp_name_col = \"taxon\",     pa_col = \"presence\"): could not find function \"get_occurrence_data\" head(occ_long2) #> Error: object 'occ_long2' not found  # 4. GBIF download (requires internet) ----------------------------------------------- if (FALSE) { # \\dontrun{ gbif_test = get_occurrence_data(   source_type   = \"gbif\",   gbif_zip_url  = \"https://api.gbif.org/v1/occurrence/download/request/0038969-240906103802322.zip\" ) } # }"},{"path":"https://macsands.github.io/dissmapr/reference/gower_dissimilarity.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Gower's Dissimilarity — gower_dissimilarity","title":"Calculate Gower's Dissimilarity — gower_dissimilarity","text":"Calculate Gower's Dissimilarity","code":""},{"path":"https://macsands.github.io/dissmapr/reference/gower_dissimilarity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Gower's Dissimilarity — gower_dissimilarity","text":"","code":"gower_dissimilarity(vec_from, vec_to)"},{"path":"https://macsands.github.io/dissmapr/reference/gower_dissimilarity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Gower's Dissimilarity — gower_dissimilarity","text":"vec_from numeric categorical vector first site. vec_to numeric categorical vector second site.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/gower_dissimilarity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Gower's Dissimilarity — gower_dissimilarity","text":"Gower dissimilarity value.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/hello.html","id":null,"dir":"Reference","previous_headings":"","what":"Hello — hello","title":"Hello — hello","text":"Prints greeting message.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/hello.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Hello — hello","text":"","code":"hello(name = \"World\")"},{"path":"https://macsands.github.io/dissmapr/reference/hello.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Hello — hello","text":"name character string; defaults \"World\".","code":""},{"path":"https://macsands.github.io/dissmapr/reference/hello.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Hello — hello","text":"Prints greeting message.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/map_bioreg.html","id":null,"dir":"Reference","previous_headings":"","what":"Map Bioregion Clusters and Spatially Interpolate Assignments — map_bioreg","title":"Map Bioregion Clusters and Spatially Interpolate Assignments — map_bioreg","text":"Runs several unsupervised clustering algorithms multivariate environmental data, aligns cluster labels common k-means reference, visualises resulting partitions, produces gridded bioregion surfaces nearest-neighbour (NN) /thin-plate-spline (TPS) interpolation.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/map_bioreg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Map Bioregion Clusters and Spatially Interpolate Assignments — map_bioreg","text":"","code":"map_bioreg(   data,   scale_cols,   clus_method = \"all\",   plot = TRUE,   interp = \"both\",   x_col = \"x\",   y_col = \"y\",   resolution = 0.5 )"},{"path":"https://macsands.github.io/dissmapr/reference/map_bioreg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Map Bioregion Clusters and Spatially Interpolate Assignments — map_bioreg","text":"data data frame containing longitude / latitude columns variables scale_cols. scale_cols Character vector naming columns z-scale clustering. clus_method Character; one \"kmeans\", \"pam\", \"hclust\", \"gmm\", \"\" (default) four. plot Logical; TRUE (default) 2×2 patchwork cluster maps printed. interp Character; interpolation type: \"NN\", \"Tps\", \"\" (default). x_col, y_col Names longitude latitude columns (defaults \"x\", \"y\"). resolution Numeric. Grid cell size (map units) used build interpolation raster (default 0.5).","code":""},{"path":"https://macsands.github.io/dissmapr/reference/map_bioreg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Map Bioregion Clusters and Spatially Interpolate Assignments — map_bioreg","text":"list three components data Original data added cluster columns (kmeans_opt, pam_opt_aligned, hc_opt_aligned, gmm_opt_aligned). interpolated SpatRaster stack continuous NN TPS predictions (one layer per algorithm). clusters SpatRaster stack re-classified discrete clusters (TPS , NULL otherwise).","code":""},{"path":"https://macsands.github.io/dissmapr/reference/map_bioreg.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Map Bioregion Clusters and Spatially Interpolate Assignments — map_bioreg","text":"Clustering   optimal number clusters k k-means selected NbClust using silhouette criterion (min.nc = 2, max.nc = 10). Label alignment   different algorithms label clusters arbitrarily, labels remapped match k-means centroids via nearest-centroid assignment. Interpolation   algorithm point-wise clusters projected raster grid: – NN: computationally cheap 1-nearest neighbour assignment – TPS: smooth thin-plate splines fitted fields. Predicted fractional surfaces optionally re-classified discrete cluster IDs.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/map_bioreg.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Map Bioregion Clusters and Spatially Interpolate Assignments — map_bioreg","text":"","code":"if (FALSE) { # \\dontrun{ ## Synthetic example (≈ 10 s) set.seed(1) n  <- 150 df <- data.frame(   x  = runif(n, 23, 24),               # longitude   y  = runif(n, -34, -33),             # latitude   t1 = rnorm(n),                       # environmental predictors   t2 = rnorm(n) )  res <- map_bioreg(   data        = df,   scale_cols  = c(\"t1\", \"t2\"),   clus_method = \"kmeans\",  # keep it light   plot        = FALSE,   interp      = \"NN\",   resolution  = 0.2 )  names(res) head(res$data) res$interpolated            # view with terra::plot(res$interpolated) } # }"},{"path":"https://macsands.github.io/dissmapr/reference/map_bioregDiff.html","id":null,"dir":"Reference","previous_headings":"","what":"Map Bioregional Change Metrics Between Categorical Raster Layers — map_bioregDiff","title":"Map Bioregional Change Metrics Between Categorical Raster Layers — map_bioregDiff","text":"Calculates five complementary indices quantify categorical (e.g. bioregion / cluster) label raster cell changes across temporal scenario stack rasters: Difference count – total number times cell’s label differs first layer. Shannon entropy – information‐theoretic diversity labels within cell’s time-series. Stability – proportion layers label identical first layer (1 = always unchanged, 0 = always different). Transition frequency – sum binary change maps successive layers (often change occurs pair neighbours). Weighted change index – cumulative dissimilarity-weighted change weight derived empirical frequency transitions pairs labels.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/map_bioregDiff.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Map Bioregional Change Metrics Between Categorical Raster Layers — map_bioregDiff","text":"","code":"map_bioregDiff(raster_input, approach = \"all\")"},{"path":"https://macsands.github.io/dissmapr/reference/map_bioregDiff.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Map Bioregional Change Metrics Between Categorical Raster Layers — map_bioregDiff","text":"raster_input multi-layer SpatRaster list single-layer SpatRaster objects representing spatial extent/resolution. approach Character string specifying metric return: \"difference_count\", \"shannon_entropy\", \"stability\", \"transition_frequency\", \"weighted_change_index\", \"\" (default) five-layer stack containing every metric.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/map_bioregDiff.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Map Bioregional Change Metrics Between Categorical Raster Layers — map_bioregDiff","text":"SpatRaster: single-layer approach one named metrics; five-layer (names: Difference_Count, Shannon_Entropy, Stability, Transition_Frequency, Weighted_Change_Index) approach = \"\".","code":""},{"path":"https://macsands.github.io/dissmapr/reference/map_bioregDiff.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Map Bioregional Change Metrics Between Categorical Raster Layers — map_bioregDiff","text":"dissimilarity weights weighted change index built observed transition table successive layers, normalised lie 0 1 (larger = rarer transition).  function accepts either multi-layer SpatRaster plain list single-layer SpatRasters, internally concatenated terra.","code":""},{"path":[]},{"path":"https://macsands.github.io/dissmapr/reference/map_bioregDiff.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Map Bioregional Change Metrics Between Categorical Raster Layers — map_bioregDiff","text":"","code":"## ------------------------------------------------------------- ## Minimal reproducible example with three random categorical ## rasters (four classes, identical geometry) ## ------------------------------------------------------------- if (requireNamespace(\"terra\", quietly = TRUE)) {   set.seed(42)    r1 <- terra::rast(nrows = 40, ncols = 40,                     vals  = sample(1:4, 40 * 40, TRUE))   r2 <- terra::rast(r1, vals = sample(1:4, ncell(r1), TRUE))   r3 <- terra::rast(r1, vals = sample(1:4, ncell(r1), TRUE))    r_stack <- terra::rast(list(r1, r2, r3))   names(r_stack) <- paste0(\"t\", 1:3)    ## 1. All five metrics   diff_all <- map_bioregDiff(r_stack, approach = \"all\")   print(diff_all)    ## 2. Just the Shannon-entropy layer   ent <- map_bioregDiff(r_stack, approach = \"shannon_entropy\")   terra::plot(ent, main = \"Shannon entropy of label sequence\") } #> Error in ncell(r1): could not find function \"ncell\""},{"path":"https://macsands.github.io/dissmapr/reference/mutual_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Mutual Information — mutual_info","title":"Calculate Mutual Information — mutual_info","text":"Mutual information dependence (linear + non-linear); pairwise cumulative multi-site.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/mutual_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Mutual Information — mutual_info","text":"","code":"mutual_info(vec_from, vec_to)"},{"path":"https://macsands.github.io/dissmapr/reference/mutual_info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Mutual Information — mutual_info","text":"vec_from numeric categorical vector first variable. vec_to numeric categorical vector second variable.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/mutual_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Mutual Information — mutual_info","text":"mutual information value two variables.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/optimized_compute_orderwise.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Order-wise Pairwise Metrics with Optional Parallel Sampling — optimized_compute_orderwise","title":"Compute Order-wise Pairwise Metrics with Optional Parallel Sampling — optimized_compute_orderwise","text":"flexible, high-performance engine calculating dissimilarity, distance, custom metric focal site every combination \\((order-1)\\) sites.  routine supports: special fast paths order = 1 (trivial) order = 2 func = orderwise_diss_gower; great-circle distances via geodist_helper (requires coord_cols); arbitrary metrics acting numeric “site vectors” defined sp_cols; parallel execution future.apply progress bars pbapply; random complete sampling higher-order combinations.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/optimized_compute_orderwise.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Order-wise Pairwise Metrics with Optional Parallel Sampling — optimized_compute_orderwise","text":"","code":"optimized_compute_orderwise(   df,   func,   site_col,   sp_cols,   order = 2,   sample_no = NULL,   sample_portion = 1,   parallel = TRUE,   n_workers = parallel::detectCores() - 1,   coord_cols = NULL )"},{"path":"https://macsands.github.io/dissmapr/reference/optimized_compute_orderwise.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Order-wise Pairwise Metrics with Optional Parallel Sampling — optimized_compute_orderwise","text":"df Data frame data.table containing site data. func Function two numeric vectors returning single numeric value (e.g. orderwise_diss_gower, geodist_helper). site_col Character; column unique site identifiers. sp_cols Character integer vector giving columns used build site’s numeric vector func geodist_helper. order Integer scalar vector orders (≥ 1).  values \\(> 2\\) function iterates order. sample_no Integer. Maximum number combinations sample per focal site orders ≥ 3. NULL (default) combinations used (subject sample_portion). sample_portion Numeric (0, 1]. Proportion combinations retain sample_no = NULL.  Ignored sample_no supplied. parallel Logical. Run computations parallel future.apply (default TRUE). n_workers Integer. Number background workers; default parallel::detectCores() - 1. coord_cols Character vector coordinate columns (e.g. c(\"x\",\"y\")) required func = geodist_helper.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/optimized_compute_orderwise.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Order-wise Pairwise Metrics with Optional Parallel Sampling — optimized_compute_orderwise","text":"data.table four columns site_from Focal site ID. site_to Comma-separated list comparison sites (NA order = 1). value Computed metric. order order used calculation.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/optimized_compute_orderwise.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Compute Order-wise Pairwise Metrics with Optional Parallel Sampling — optimized_compute_orderwise","text":"site relevant data vector pre-extracted re-used, avoiding repeated sub-setting.  order = 2 func = orderwise_diss_gower full pairwise Gower distance matrix built one call cluster::daisy(), melted, returned, yielding major speed-looping.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/optimized_compute_orderwise.html","id":"dependencies","dir":"Reference","previous_headings":"","what":"Dependencies","title":"Compute Order-wise Pairwise Metrics with Optional Parallel Sampling — optimized_compute_orderwise","text":"Requires pbapply, data.table, future.apply, reshape2, dplyr (checked run-time).  Gower distances example assumes orderwise_diss_gower() exported dissmapr.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/optimized_compute_orderwise.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Order-wise Pairwise Metrics with Optional Parallel Sampling — optimized_compute_orderwise","text":"","code":"## --------------------------------------------------------------- ## Example 1 – Gower dissimilarity between species vectors (order 2) ## --------------------------------------------------------------- if (requireNamespace(\"cluster\", quietly = TRUE)) {   set.seed(1)   n_sites  <- 8   n_spp    <- 20   test_df  <- data.frame(     site_id = paste0(\"s\", seq_len(n_sites)),     x       = runif(n_sites, 23, 24),     y       = runif(n_sites, -34, -33),     matrix(rpois(n_sites * n_spp, 1),            nrow = n_sites,            dimnames = list(NULL, paste0(\"sp\", seq_len(n_spp))))   )    res2 <- optimized_compute_orderwise(     df        = test_df,     func      = orderwise_diss_gower,   # dissmapr helper     site_col  = \"site_id\",     sp_cols   = paste0(\"sp\", 1:n_spp),     order     = 2,     parallel  = FALSE   )   head(res2) } #> Error in optimized_compute_orderwise(df = test_df, func = orderwise_diss_gower,     site_col = \"site_id\", sp_cols = paste0(\"sp\", 1:n_spp), order = 2,     parallel = FALSE): could not find function \"optimized_compute_orderwise\"  ## --------------------------------------------------------------- ## Example 2 – Great-circle distance (km) between site centroids ## --------------------------------------------------------------- if (requireNamespace(\"geosphere\", quietly = TRUE)) {   # geodist_helper is expected to be exported by dissmapr   res_geo <- optimized_compute_orderwise(     df         = test_df,     func       = geodist_helper,     site_col   = \"site_id\",     order      = 2,     coord_cols = c(\"x\", \"y\"),     parallel   = FALSE   )   head(res_geo) } #> Error in optimized_compute_orderwise(df = test_df, func = geodist_helper,     site_col = \"site_id\", order = 2, coord_cols = c(\"x\", \"y\"),     parallel = FALSE): could not find function \"optimized_compute_orderwise\""},{"path":"https://macsands.github.io/dissmapr/reference/orderwise_diss_gower.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Gower dissimilarity between two site vectors — orderwise_diss_gower","title":"Compute Gower dissimilarity between two site vectors — orderwise_diss_gower","text":"Calculates Gower dissimilarity (bounded 0–1 measure) two numeric vectors (e.g., species abundances) using cluster::daisy() function. second vector NULL (order 1), returns NA_real_ since pairwise comparison meaningful.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/orderwise_diss_gower.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Gower dissimilarity between two site vectors — orderwise_diss_gower","text":"","code":"orderwise_diss_gower(vec_from, vec_to = NULL)"},{"path":"https://macsands.github.io/dissmapr/reference/orderwise_diss_gower.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Gower dissimilarity between two site vectors — orderwise_diss_gower","text":"vec_from Numeric vector representing first site's attributes (e.g., species counts trait values). vec_to Optional numeric vector second site; NULL, function returns NA_real_.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/orderwise_diss_gower.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Gower dissimilarity between two site vectors — orderwise_diss_gower","text":"single numeric dissimilarity value 0 1, NA_real_ vec_to NULL.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/phi_coef.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Phi Coefficient — phi_coef","title":"Calculate Phi Coefficient — phi_coef","text":"Phi coefficient presence–absence; –1 +1 pairwise, summary means/variances across combinations.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/phi_coef.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Phi Coefficient — phi_coef","text":"","code":"phi_coef(vec_from, vec_to)"},{"path":"https://macsands.github.io/dissmapr/reference/phi_coef.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Phi Coefficient — phi_coef","text":"vec_from binary presence-absence vector first site. vec_to binary presence-absence vector second site.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/phi_coef.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Phi Coefficient — phi_coef","text":"Phi Coefficient value.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/predict_dissim.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict Pairwise Compositional Turnover (ζ-dissimilarity) — predict_dissim","title":"Predict Pairwise Compositional Turnover (ζ-dissimilarity) — predict_dissim","text":"Generates spatial predictions order-2 compositional turnover (\\(\\zeta_2\\)) fitted zetadiv multi-site generalised dissimilarity model (Zeta.msgdm).  See calculate_pairwise_distances_matrix() distance routine function calls internally.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/predict_dissim.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict Pairwise Compositional Turnover (ζ-dissimilarity) — predict_dissim","text":"","code":"predict_dissim(   block_sp,   sbe_scaled,   zeta_model,   mean_rich,   mean_turn,   sbs_xy,   rsa = NULL,   x_col = \"x\",   y_col = \"y\" )"},{"path":"https://macsands.github.io/dissmapr/reference/predict_dissim.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict Pairwise Compositional Turnover (ζ-dissimilarity) — predict_dissim","text":"block_sp Data frame site metadata; must contain unique grid_id column coordinate columns given x_col, y_col. sbe_scaled Data frame matrix scaled environmental predictors (row order identical block_sp). zeta_model fitted model returned zetadiv::Zeta.msgdm(). mean_rich Data frame columns order value giving mean species richness (order = 1) annotation. mean_turn Data frame columns order value giving mean turnover (order = 2) annotation. sbs_xy Data frame site coordinates order sbe_scaled; must contain x_col, y_col. rsa Optional sf SpatVector polygon draw figure. x_col, y_col Names longitude / latitude columns (defaults \"x\", \"y\").","code":""},{"path":"https://macsands.github.io/dissmapr/reference/predict_dissim.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict Pairwise Compositional Turnover (ζ-dissimilarity) — predict_dissim","text":"data frame containing predictors plus: distance Mean great-circle distance (km) sites. rich_o1 Mean richness (order 1) mean_rich. turn_o2 Mean turnover (order 2) mean_turn. pred_zeta Linear predictor logit scale. pred_zetaExp Predicted turnover 0–1 scale. log_pred_zetaExp Natural-log pred_zetaExp. ggplot2 heat-map printed visual inspection.","code":""},{"path":[]},{"path":"https://macsands.github.io/dissmapr/reference/predict_dissim.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Predict Pairwise Compositional Turnover (ζ-dissimilarity) — predict_dissim","text":"","code":"if (FALSE) { # \\dontrun{ ##---------------------------------------------------------- ## Toy example with 15 sites, two predictors, 60 species ##---------------------------------------------------------- library(zetadiv) set.seed(123)  n_sites <- 15 block_sp <- data.frame(   grid_id = sprintf(\"g%02d\", 1:n_sites),   x       = runif(n_sites, 22, 24),   y       = runif(n_sites, -34, -33) )  env_raw <- data.frame(   temp = rnorm(n_sites, 20, 2),   rain = rnorm(n_sites, 600, 40) ) sbe_scaled <- scale(env_raw) |> as.data.frame()  ## Simulate a simple community matrix comm <- matrix(rbinom(n_sites * 60, 1, 0.15),                nrow = n_sites,                dimnames = list(block_sp$grid_id, paste0(\"sp\", 1:60)))  ## Fit a Zeta.msgdm model (quick settings for example) z_mod <- zetadiv::Zeta.msgdm(   data.spec = comm,   data.env  = env_raw,   xy        = block_sp[, c(\"x\", \"y\")],   order     = 2,   sam       = 100 )  mean_rich <- data.frame(order = 1, value = mean(rowSums(comm))) mean_turn <- data.frame(order = 2, value = mean(z_mod$zeta.val))  res <- predict_dissim(   block_sp   = block_sp,   sbe_scaled = sbe_scaled,   zeta_model = z_mod,   mean_rich  = mean_rich,   mean_turn  = mean_turn,   sbs_xy     = block_sp )  head(res) } # }"},{"path":"https://macsands.github.io/dissmapr/reference/required_packages.html","id":null,"dir":"Reference","previous_headings":"","what":"Helper functions for compute_orderwise — required_packages","title":"Helper functions for compute_orderwise — required_packages","text":"suite internal helper functions compute ecological indices used compute_orderwise(), including geographic distance, dissimilarity metrics, correlations, mutual information.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/richness.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Species Richness — richness","title":"Calculate Species Richness — richness","text":"Counts unique species per site; reports absolute differences pairwise summary stats (range, variance, mean) multi-site.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/richness.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Species Richness — richness","text":"","code":"richness(vec_from, vec_to = NULL)"},{"path":"https://macsands.github.io/dissmapr/reference/richness.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Species Richness — richness","text":"vec_from numeric vector representing species counts first site. vec_to (Optional) numeric vector pairwise higher-order comparisons.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/richness.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Species Richness — richness","text":"species richness value.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/rm_correlated.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove Highly Correlated Predictors — rm_correlated","title":"Remove Highly Correlated Predictors — rm_correlated","text":"Detects pairs (groups) strongly collinear predictors eliminates minimum subset necessary keep every absolute pairwise correlation user‐defined threshold.  Correlations computed stats::cor(); variables discard chosen via caret::findCorrelation() algorithm.  optional heat-map correlation matrix produced corrplot rapid inspection.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/rm_correlated.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove Highly Correlated Predictors — rm_correlated","text":"","code":"rm_correlated(data, cols = NULL, threshold = 0.7, plot = TRUE)"},{"path":"https://macsands.github.io/dissmapr/reference/rm_correlated.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove Highly Correlated Predictors — rm_correlated","text":"data data frame candidate predictor variables. cols Optional numeric character vector specifying columns consider; defaults numeric columns. threshold Numeric \\([0,1]\\) specifying absolute correlation cut-(default 0.7). plot Logical; TRUE (default) correlation heat-map coefficients drawn.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/rm_correlated.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove Highly Correlated Predictors — rm_correlated","text":"data frame containing original rows subset predictor columns whose absolute pairwise correlations \\(<\\) threshold.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/rm_correlated.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Remove Highly Correlated Predictors — rm_correlated","text":"Non‐numeric columns silently dropped prior correlation calculation. cols supplied (numeric character), columns tested; otherwise numeric columns data used. names removed retained variables printed console transparency.","code":""},{"path":[]},{"path":"https://macsands.github.io/dissmapr/reference/rm_correlated.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove Highly Correlated Predictors — rm_correlated","text":"","code":"set.seed(99) n  <- 200 df <- data.frame(   a = rnorm(n),   b = rnorm(n),   c = rnorm(n) * 0.8 + rnorm(n) * 0.2,  # moderately corr. with 'a'   d = rnorm(n) * 0.9 + rnorm(n) * 0.1   # moderately corr. with 'b' )  ## Remove predictors with |r| ≥ 0.75 df_reduced <- rm_correlated(df, threshold = 0.75, plot = FALSE) #> Error in rm_correlated(df, threshold = 0.75, plot = FALSE): could not find function \"rm_correlated\" names(df_reduced) #> Error: object 'df_reduced' not found  ## Visualise the correlation structure & removals at a stricter threshold rm_correlated(df, threshold = 0.6, plot = TRUE) #> Error in rm_correlated(df, threshold = 0.6, plot = TRUE): could not find function \"rm_correlated\""},{"path":"https://macsands.github.io/dissmapr/reference/turnover.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Species Turnover or Beta Diversity — turnover","title":"Calculate Species Turnover or Beta Diversity — turnover","text":"Computes beta diversity proportion unshared; 0–1 pairwise, extended multi-site averages totals.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/turnover.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Species Turnover or Beta Diversity — turnover","text":"","code":"turnover(vec_from, vec_to = NULL)"},{"path":"https://macsands.github.io/dissmapr/reference/turnover.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Species Turnover or Beta Diversity — turnover","text":"vec_from numeric vector representing species counts first site. vec_to (Optional) numeric vector pairwise higher-order comparisons.","code":""},{"path":"https://macsands.github.io/dissmapr/reference/turnover.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Species Turnover or Beta Diversity — turnover","text":"species turnover value.","code":""},{"path":"https://macsands.github.io/dissmapr/news/index.html","id":"dissmapr-010","dir":"Changelog","previous_headings":"","what":"dissmapr 0.1.0","title":"dissmapr 0.1.0","text":"Initial CRAN submission.","code":""}]

% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/map_bioregDiff.R
\name{map_bioregDiff}
\alias{map_bioregDiff}
\title{Map Bioregional Change Metrics Between Categorical Raster Layers}
\usage{
map_bioregDiff(raster_input, approach = "all")
}
\arguments{
\item{raster_input}{A multi-layer \code{SpatRaster} \strong{or} a \code{list} of single-layer
\code{SpatRaster} objects representing the same spatial extent/resolution.}

\item{approach}{Character string specifying the metric to return:
\code{"difference_count"}, \code{"shannon_entropy"}, \code{"stability"},
\code{"transition_frequency"}, \code{"weighted_change_index"}, or \code{"all"} (default)
for a five-layer stack containing every metric.}
}
\value{
A \code{SpatRaster}:
\itemize{
\item \strong{single-layer} if \code{approach} is one of the named metrics;
\item \strong{five-layer} (names: \code{Difference_Count}, \code{Shannon_Entropy}, \code{Stability},
\code{Transition_Frequency}, \code{Weighted_Change_Index}) if \code{approach = "all"}.
}
}
\description{
Calculates five complementary indices that quantify how the categorical
(e.g. bioregion / cluster) label of each raster cell changes across a
temporal or scenario stack of rasters:
\itemize{
\item \strong{Difference count} – total number of times a cell’s label differs from
the first layer.
\item \strong{Shannon entropy} – information‐theoretic diversity of labels within the
cell’s time-series.
\item \strong{Stability} – proportion of layers in which the label is identical to
the first layer \emph{(1 = always unchanged, 0 = always different)}.
\item \strong{Transition frequency} – sum of binary change maps between successive
layers (\emph{how often a change occurs between any pair of neighbours}).
\item \strong{Weighted change index} – cumulative dissimilarity-weighted change where
the weight is derived from the empirical frequency of transitions between
all pairs of labels.
}
}
\details{
The dissimilarity weights for the \strong{weighted change index} are built from
the observed transition table of successive layers, normalised to lie
between 0 and 1 (larger = rarer transition).  The function accepts either a
multi-layer \code{SpatRaster} or a plain \code{list} of single-layer \code{SpatRaster}s,
which is internally concatenated with \strong{terra}.
}
\examples{
## -------------------------------------------------------------
## Minimal reproducible example with three random categorical
## rasters (four classes, identical geometry)
## -------------------------------------------------------------
if (requireNamespace("terra", quietly = TRUE)) {
  set.seed(42)

  r1 <- terra::rast(nrows = 40, ncols = 40,
                    vals  = sample(1:4, 40 * 40, TRUE))
  r2 <- terra::rast(r1, vals = sample(1:4, ncell(r1), TRUE))
  r3 <- terra::rast(r1, vals = sample(1:4, ncell(r1), TRUE))

  r_stack <- terra::rast(list(r1, r2, r3))
  names(r_stack) <- paste0("t", 1:3)

  ## 1. All five metrics
  diff_all <- map_bioregDiff(r_stack, approach = "all")
  print(diff_all)

  ## 2. Just the Shannon-entropy layer
  ent <- map_bioregDiff(r_stack, approach = "shannon_entropy")
  terra::plot(ent, main = "Shannon entropy of label sequence")
}

}
\seealso{
\code{\link[terra]{app}}, \code{\link[terra]{rast}}
}
